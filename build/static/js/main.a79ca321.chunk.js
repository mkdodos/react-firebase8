(this["webpackJsonpreact-firebase8"]=this["webpackJsonpreact-firebase8"]||[]).push([[0],{196:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),r=c(9),i=c(221),s=c(213),l=c(215),o=c(210),j=c(143),u=(c(150),j.a.initializeApp({apiKey:"AIzaSyClLeHQJMt3BzbrK_AHpWeq0nlqzY2r5ik",authDomain:"money-39797.firebaseapp.com",projectId:"money-39797",storageBucket:"money-39797.appspot.com",messagingSenderId:"142963352306",appId:"1:142963352306:web:ac3c09e593009a5175666b",measurementId:"G-012VKYDZ07"}).auth()),d=j.a,b=c(19),O=c(1);function h(){var e=Object(n.useRef)(),t=Object(n.useRef)(),c=Object(n.useRef)(),a=Object(n.useState)(""),j=Object(r.a)(a,2),u=j[0],d=j[1],h=Object(b.g)();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(i.a,{children:Object(O.jsxs)(i.a.Body,{children:[Object(O.jsx)("h2",{className:"text-center mb-4",children:"Sign up"}),u&&Object(O.jsx)(s.a,{variant:"danger",children:u}),Object(O.jsxs)(l.a,{onSubmit:function(e){if(e.preventDefault(),t.current.value!==c.current.value)return d("Passwords do not match");h.push("/"),d("")},children:[Object(O.jsxs)(l.a.Group,{id:"email",className:"mb-3",children:[Object(O.jsx)(l.a.Label,{children:"Email"}),Object(O.jsx)(l.a.Control,{type:"email",ref:e,required:!0})]}),Object(O.jsxs)(l.a.Group,{id:"password",className:"mb-3",children:[Object(O.jsx)(l.a.Label,{children:"Password"}),Object(O.jsx)(l.a.Control,{type:"password",ref:t,required:!0})]}),Object(O.jsxs)(l.a.Group,{id:"password-confirm",className:"mb-3",children:[Object(O.jsx)(l.a.Label,{children:"Password Confirmation"}),Object(O.jsx)(l.a.Control,{type:"password",ref:c,required:!0})]}),Object(O.jsx)(o.a,{className:"w-10",type:"submit",children:"Sign Up"})]})]})}),Object(O.jsx)("div",{className:"w-100 text-center mt-2",children:"Already have an account? Log in"})]})}var x=c(93),f=c(108),p=c(27),m=c(6),v=c(218),g=c(223),C=c(217),S=c(198),y=c(212),k=c(219);var w=function(){var e=a.a.useState([]),t=Object(r.a)(e,2),c=t[0],n=t[1],i=a.a.useState(!1),s=Object(r.a)(i,2),l=s[0],o=s[1],j=a.a.useState(!1),u=Object(r.a)(j,2),b=u[0],h=u[1],x=a.a.useState((new Date).toLocaleDateString()),f=Object(r.a)(x,2),p=f[0],w=f[1],H=a.a.useState(""),I=Object(r.a)(H,2),F=I[0],R=I[1],A=a.a.useState(0),E=Object(r.a)(A,2),_=E[0],D=E[1],P=a.a.useState(""),N=Object(r.a)(P,2),B=N[0],q=N[1],L=a.a.useState(""),U=Object(r.a)(L,2),z=U[0],G=U[1];return a.a.useEffect((function(){d.firestore().collection("incomes").orderBy("date","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id})})),c=0;t.forEach((function(e){c+=1*e.amt})),D(c),n(t)}))}),[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(v.a,{open:l,closeIcon:!0,onClose:function(){return o(!1)},children:[Object(O.jsx)(v.a.Header,{children:"Select a Photo"}),Object(O.jsxs)(v.a.Content,{image:!0,children:[Object(O.jsx)(v.a.Description,{children:Object(O.jsx)(g.a,{children:"\u7de8\u8f2f"})}),Object(O.jsxs)(C.a,{children:[Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u65e5\u671f"}),Object(O.jsx)("input",{value:p,placeholder:"",onChange:function(e){return w(e.target.value)}})]}),Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u91d1\u984d"}),Object(O.jsx)("input",{type:"number",value:F,placeholder:"",onChange:function(e){return R(e.target.value)}})]}),Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u5099\u8a3b"}),Object(O.jsx)("input",{value:B,placeholder:"",onChange:function(e){return q(e.target.value)}})]})]})]}),Object(O.jsxs)(v.a.Actions,{children:[z?Object(O.jsx)(S.a,{color:"red",floated:"left",loading:b,onClick:function(){h(!0),d.firestore().collection("incomes").doc(z).delete().then((function(){console.log("Document successfully deleted!"),o(!1),h(!1),G(""),R(""),q("")})).catch((function(e){console.error("Error removing document: ",e)}))},children:"\u522a\u9664"}):"",Object(O.jsx)(S.a,{color:"blue",loading:b,onClick:function(){h(!0);var e=d.firestore();z?e.collection("incomes").doc(z).update({date:p,amt:F,note:B}).then((function(){o(!1),h(!1),G(""),R(""),q(""),console.log("Document successfully updated!")})).catch((function(e){console.error("Error updating document: ",e)})):e.collection("incomes").add({date:p,amt:F,note:B}).then((function(){o(!1),h(!1),console.log("Document successfully created!")}))},children:"\u5132\u5b58"})]})]}),Object(O.jsxs)(y.a,{children:[Object(O.jsx)(S.a,{color:"blue",onClick:function(){o(!0),G(""),R(""),q(""),w((new Date).toLocaleDateString())},children:"\u65b0\u589e"}),Object(O.jsx)(g.a,{children:_}),Object(O.jsxs)(k.a,{unstackable:!0,children:[Object(O.jsx)(k.a.Header,{children:Object(O.jsxs)(k.a.Row,{children:[Object(O.jsx)(k.a.HeaderCell,{children:"\u65e5\u671f"}),Object(O.jsx)(k.a.HeaderCell,{children:"\u6536\u5165"}),Object(O.jsx)(k.a.HeaderCell,{children:"\u5099\u8a3b"})]})}),Object(O.jsx)(k.a.Body,{children:c.map((function(e){return Object(O.jsxs)(k.a.Row,{onClick:function(){w(e.date),q(e.note),R(e.amt),G(e.id),o(!0)},children:[Object(O.jsx)(k.a.Cell,{children:e.date}),Object(O.jsx)(k.a.Cell,{children:e.amt}),Object(O.jsx)(k.a.Cell,{children:e.note})]},e.id)}))})]})]})]})},H=c(211),I=c(220);var F=function(){var e="stocks",t=a.a.useState([]),c=Object(r.a)(t,2),n=c[0],i=c[1],s=a.a.useState(!1),l=Object(r.a)(s,2),o=l[0],j=l[1],u=a.a.useState(!1),b=Object(r.a)(u,2),h=b[0],x=b[1],f=a.a.useState(""),p=Object(r.a)(f,2),w=p[0],F=p[1],R=a.a.useState(""),A=Object(r.a)(R,2),E=A[0],_=A[1],D=a.a.useState(""),P=Object(r.a)(D,2),N=P[0],B=P[1],q=a.a.useState(0),L=Object(r.a)(q,2),U=L[0],z=L[1],G=a.a.useState([]),M=Object(r.a)(G,2),J=M[0],K=M[1],T=a.a.useState((new Date).toISOString().slice(0,10)),V=Object(r.a)(T,2),W=V[0],Y=V[1],$=a.a.useState(""),Q=Object(r.a)($,2),Z=Q[0],X=Q[1],ee=a.a.useState(0),te=Object(r.a)(ee,2),ce=te[0],ne=te[1],ae=a.a.useState(0),re=Object(r.a)(ae,2),ie=re[0],se=re[1];function le(e){return e.sort((function(e,t){return e.date<t.date?1:-1}))}function oe(e){return new Intl.NumberFormat("en-US",{currency:"USD"}).format(Math.round(e))}function je(){j(!1),x(!1),F(""),_(""),B(""),z("")}return a.a.useEffect((function(){d.firestore().collection(e).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id})}));i(t);var c=0;t.forEach((function(e){c+=e.qty*e.price})),ne(c),c=0,t.forEach((function(e){var t;c+=e.qty*(null===(t=le(e.currPrices)[0])||void 0===t?void 0:t.price)})),se(c)}))}),[]),Object(O.jsxs)(y.a,{children:[Object(O.jsxs)(v.a,{open:o,closeIcon:!0,onClose:function(){return j(!1)},children:[Object(O.jsx)(v.a.Header,{children:"Select a Photo"}),Object(O.jsxs)(v.a.Content,{image:!0,children:[Object(O.jsx)(v.a.Description,{children:Object(O.jsx)(g.a,{children:"\u7de8\u8f2f"})}),Object(O.jsxs)(C.a,{children:[Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u540d\u7a31"}),Object(O.jsx)("input",{value:E,placeholder:"",onChange:function(e){return _(e.target.value)}})]}),Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u6578\u91cf"}),Object(O.jsx)("input",{type:"number",value:N,placeholder:"",onChange:function(e){return B(e.target.value)}})]}),Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u55ae\u50f9"}),Object(O.jsx)("input",{type:"number",value:U,placeholder:"",onChange:function(e){return z(e.target.value)}})]}),Object(O.jsx)(C.a.Field,{children:Object(O.jsx)(S.a,{color:"grey",onClick:function(){var t=d.firestore().collection(e).doc(w),c={date:W,price:Z};t.update({currPrices:d.firestore.FieldValue.arrayUnion(c)}),j(!1)},children:"\u65b0\u589e\u660e\u7d30"})}),Object(O.jsx)(C.a.Field,{children:Object(O.jsx)(H.a,{placeholder:"date",label:"\u65e5\u671f",type:"date",value:W,onChange:function(e){return Y(e.target.value)}})}),Object(O.jsx)(C.a.Field,{children:Object(O.jsx)(H.a,{type:"number",placeholder:"price",label:"\u50f9\u683c",onChange:function(e){return X(e.target.value)}})})]}),Object(O.jsx)(I.a,{children:J?J.map((function(t){return Object(O.jsxs)(I.a.Item,{children:[Object(O.jsx)(I.a.Icon,{onClick:function(){return function(t,c){var n=d.firestore().collection(e).doc(t),a=J.findIndex((function(e){return e.date===c.date}));J.splice(a,1),n.update({currPrices:d.firestore.FieldValue.arrayRemove(c)})}(w,{date:t.date,price:t.price})},name:"close"}),Object(O.jsxs)(I.a.Content,{children:[t.date,"-",t.price]})]},t.date)})):""})]}),Object(O.jsxs)(v.a.Actions,{children:[w?Object(O.jsx)(S.a,{color:"red",floated:"left",loading:h,onClick:function(){x(!0),d.firestore().collection(e).doc(w).delete().then((function(){console.log("Document successfully deleted!"),je()})).catch((function(e){console.error("Error removing document: ",e)}))},children:"\u522a\u9664"}):"",Object(O.jsx)(S.a,{color:"blue",loading:h,onClick:function(){x(!0);var t=d.firestore();w?t.collection(e).doc(w).update({stockName:E,qty:N,price:U}).then((function(){je(),console.log("Document successfully updated!")})).catch((function(e){console.error("Error updating document: ",e)})):t.collection(e).add({stockName:E,qty:N,price:U}).then((function(){je(),console.log("Document successfully created!")}))},children:"\u5132\u5b58"})]})]}),Object(O.jsx)(S.a,{color:"blue",onClick:function(){j(!0),F(""),B(""),z("")},children:"\u65b0\u589e"}),Object(O.jsxs)(g.a,{floated:"right",children:[oe(ie)," - ",oe(ce)," = ",oe(ie-ce)," "]}),Object(O.jsxs)(k.a,{unstackable:!0,children:[Object(O.jsx)(k.a.Header,{children:Object(O.jsxs)(k.a.Row,{children:[Object(O.jsx)(k.a.HeaderCell,{children:"\u540d\u7a31"}),Object(O.jsx)(k.a.HeaderCell,{children:"\u80a1\u6578"}),Object(O.jsx)(k.a.HeaderCell,{children:"\u73fe\u50f9"}),Object(O.jsx)(k.a.HeaderCell,{children:"\u6210\u672c"}),Object(O.jsx)(k.a.HeaderCell,{textAlign:"right",children:"\u5c0f\u8a08"})]})}),Object(O.jsx)(k.a.Body,{children:n.map((function(e){var t,c;return Object(O.jsxs)(k.a.Row,{onClick:function(){_(e.stockName),B(e.qty),z(e.price),F(e.id),K(e.currPrices),j(!0)},children:[Object(O.jsx)(k.a.Cell,{children:e.stockName}),Object(O.jsx)(k.a.Cell,{children:e.qty}),Object(O.jsx)(k.a.Cell,{children:Object(O.jsx)(I.a,{children:e.currPrices?Object(O.jsx)(I.a.Item,{children:null===(t=le(e.currPrices)[0])||void 0===t?void 0:t.price}):""})}),Object(O.jsx)(k.a.Cell,{children:e.price}),Object(O.jsx)(k.a.Cell,{textAlign:"right",children:oe(e.qty*((null===(c=le(e.currPrices)[0])||void 0===c?void 0:c.price)-e.price))})]},e.id)}))})]})]})},R=a.a.createContext();function A(){return Object(n.useContext)(R)}function E(e){var t=e.children,c=Object(n.useState)(),a=Object(r.a)(c,2),i=a[0],s=a[1],l=Object(n.useState)(!0),o=Object(r.a)(l,2),j=o[0],d=o[1];Object(n.useEffect)((function(){return u.onAuthStateChanged((function(e){s(e),d(!1)}))}),[]);var b={currentUser:i,logout:function(){return u.signOut()}};return Object(O.jsx)(R.Provider,{value:b,children:!j&&t})}var _=function(){var e=a.a.useState([]),t=Object(r.a)(e,2),c=t[0],n=t[1],i=a.a.useState(""),s=Object(r.a)(i,2),l=s[0],o=s[1],j=a.a.useState(""),u=Object(r.a)(j,2),b=u[0],h=u[1],x=a.a.useState(!1),f=Object(r.a)(x,2),p=f[0],g=f[1],w=a.a.useState(""),H=Object(r.a)(w,2),I=H[0],F=H[1],R=a.a.useState(!1),E=Object(r.a)(R,2),_=E[0],D=E[1],P=A().currentUser;return a.a.useEffect((function(){P&&d.firestore().collection("accounts").where("user_id","==",P.uid).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id})}));n(t)}))}),[]),Object(O.jsxs)(y.a,{children:[Object(O.jsxs)(k.a,{unstackable:!0,children:[Object(O.jsx)(k.a.Header,{children:Object(O.jsxs)(k.a.Row,{children:[Object(O.jsx)(k.a.HeaderCell,{children:"\u540d\u7a31"}),Object(O.jsx)(k.a.HeaderCell,{children:"\u9918\u984d"})]})}),Object(O.jsx)(k.a.Body,{children:c.map((function(e,t){return Object(O.jsxs)(k.a.Row,{onClick:function(){h(e.balance),o(e.name),F(e.id),g(!0)},children:[Object(O.jsx)(k.a.Cell,{children:e.name}),Object(O.jsx)(k.a.Cell,{children:e.balance})]},t)}))})]}),Object(O.jsxs)(v.a,{closeIcon:!0,onClose:function(){return g(!1)},onOpen:function(){g(!0)},open:p,trigger:Object(O.jsx)(S.a,{children:"\u65b0\u589e"}),children:[Object(O.jsx)(v.a.Header,{children:"\u65b0\u589e\u5e33\u6236"}),Object(O.jsx)(v.a.Content,{children:Object(O.jsxs)(C.a,{children:[Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u540d\u7a31"}),Object(O.jsx)("input",{value:l,onChange:function(e){o(e.target.value)},placeholder:"\u8acb\u8f38\u5165\u5e33\u6236\u540d\u7a31"})]}),Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u9918\u984d"}),Object(O.jsx)("input",{type:"number",value:b,onChange:function(e){h(e.target.value)},placeholder:"\u8acb\u8f38\u5165\u9918\u984d"})]})]})}),Object(O.jsxs)(v.a.Actions,{children:[I?Object(O.jsx)(S.a,{color:"red",loading:_,floated:"left",onClick:function(){D(!0),d.firestore().collection("accounts").doc(I).delete().then((function(){console.log("Document successfully deleted!"),g(!1),D(!1),F(""),o("")})).catch((function(e){console.error("Error removing document: ",e)}))},children:"\u522a\u9664"}):"",Object(O.jsx)(S.a,{color:"blue",loading:_,onClick:function(){I?function(){D(!0);var e=d.firestore().collection("accounts").doc(I),t={name:l,balance:b};e.update(t).then((function(){g(!1),o(""),F(""),D(!1)}))}():function(){g(!1),o("");var e={name:l,user_id:P.uid,createdAt:d.firestore.Timestamp.now()};d.firestore().collection("accounts").add(e).then((function(){console.log("create")}))}()},children:"\u5132\u5b58"})]})]})]})};var D=function(e){var t=e.user,c=a.a.useState(""),n=Object(r.a)(c,2),i=n[0],s=n[1];return a.a.useEffect((function(){})),Object(O.jsxs)(y.a,{children:[Object(O.jsx)(g.a,{children:t.displayName}),Object(O.jsx)(C.a,{onSubmit:function(){t.updateProfile({displayName:i}).then((function(){s("")}))},children:Object(O.jsxs)(C.a.Group,{children:[Object(O.jsx)(C.a.Input,{placeholder:"Name",name:"name",value:i,onChange:function(e){s(e.target.value)}}),Object(O.jsx)(C.a.Button,{color:"teal",content:"\u66f4\u65b0"})]})})]})},P=c(216),N=c(214),B=c(224),q=c(225);var L=function(){var e=Object(b.g)(),t=a.a.useState("mkdodos@gmail.com"),c=Object(r.a)(t,2),n=c[0],i=c[1],s=a.a.useState("123456"),l=Object(r.a)(s,2),o=l[0],j=l[1];return Object(O.jsx)(y.a,{children:Object(O.jsx)("div",{children:Object(O.jsxs)(B.a,{children:[Object(O.jsx)(B.a.Column,{mobile:16,tablet:3,computer:5}),Object(O.jsx)(B.a.Column,{mobile:16,tablet:10,computer:6,children:Object(O.jsx)(q.a,{children:Object(O.jsxs)(C.a,{onSubmit:function(){d.auth().signInWithEmailAndPassword(n,o).then((function(t){e.push("/balances")}))},children:[Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u5e33\u865f"}),Object(O.jsx)(H.a,{value:n,onChange:function(e){return i(e.target.value)},placeholder:"\u8acb\u8f38\u5165\u5e33\u865f"})]}),Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u5bc6\u78bc"}),Object(O.jsx)("input",{value:o,onChange:function(e){return j(e.target.value)},placeholder:"\u8acb\u8f38\u5165\u5bc6\u78bc"})]}),Object(O.jsx)(C.a.Button,{primary:!0,children:"\u78ba\u5b9a"})]})})}),Object(O.jsx)(B.a.Column,{mobile:16,tablet:3,computer:5})]})})})},U=c(52),z=c(103),G=c(167);var M=function(){var e=Object(b.h)(),t=new URLSearchParams(e.search).get("acc"),c=a.a.useRef(),n=a.a.useState([]),i=Object(r.a)(n,2),s=i[0],l=i[1],o=a.a.useState(""),j=Object(r.a)(o,2),u=j[0],h=j[1],x=a.a.useState(""),f=Object(r.a)(x,2),p=f[0],g=f[1],y=a.a.useState(!1),w=Object(r.a)(y,2),H=w[0],I=w[1],F=a.a.useState(""),R=Object(r.a)(F,2),A=R[0],E=R[1],_=a.a.useState(!1),D=Object(r.a)(_,2),P=D[0],N=D[1];function B(){h(""),g(""),I(!1),E("")}return a.a.useEffect((function(){t?d.firestore().collection("expenses").where("account_name","==",t).orderBy("spend_date","desc").limit(20).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id})}));c.current=e.docs[e.docs.length-1],l(t)})):l([])}),[t]),Object(O.jsxs)(O.Fragment,{children:[t&&Object(O.jsx)(S.a,{onClick:function(){I(!0)},children:"\u65b0\u589e"}),Object(O.jsxs)(v.a,{open:H,closeIcon:!0,onClose:B,children:[Object(O.jsx)(v.a.Header,{children:"\u7de8\u8f2f\u652f\u51fa"}),Object(O.jsx)(v.a.Content,{children:Object(O.jsxs)(C.a,{children:[Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u9805\u76ee"}),Object(O.jsx)("input",{placeholder:"\u9805\u76ee",value:p,onChange:function(e){g(e.target.value)}})]}),Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u91d1\u984d"}),Object(O.jsx)("input",{type:"number",placeholder:"\u91d1\u984d",value:A,onChange:function(e){E(e.target.value)}})]})]})}),Object(O.jsxs)(v.a.Actions,{children:[u?Object(O.jsx)(S.a,{color:"red",floated:"left",loading:P,onClick:function(){var e=d.firestore().collection("expenses").doc(u);N(!0),e.delete().then((function(){B(),N(!1)}))},children:"\u522a\u9664"}):"",Object(O.jsx)(S.a,{onClick:function(){u?function(){var e=d.firestore().collection("expenses").doc(u),c={account_name:t,note:p,expense:A,spend_date:"2022-07-22"};N(!0),e.update(c).then((function(){B(),N(!1)}))}():function(){var e={account_name:t,note:p,expense:A,spend_date:"2022-07-22",createdAt:d.firestore.Timestamp.now()};N(!0),d.firestore().collection("expenses").add(e).then((function(){B(),N(!1)}))}()},loading:P,children:"\u5132\u5b58"})]})]}),Object(O.jsxs)(k.a,{unstackable:!0,children:[Object(O.jsx)(k.a.Header,{children:Object(O.jsxs)(k.a.Row,{children:[Object(O.jsx)(k.a.HeaderCell,{width:3,children:"\u65e5\u671f"}),Object(O.jsx)(k.a.HeaderCell,{width:5,children:"\u9805\u76ee"}),Object(O.jsx)(k.a.HeaderCell,{children:"\u91d1\u984d"})]})}),Object(O.jsx)(k.a.Body,{children:s.map((function(e,t){return Object(O.jsxs)(k.a.Row,{onClick:function(){h(e.id),g(e.note),E(e.expense),I(!0)},children:[Object(O.jsx)(k.a.Cell,{children:e.spend_date}),Object(O.jsx)(k.a.Cell,{children:e.note}),Object(O.jsx)(k.a.Cell,{children:e.expense})]},t)}))})]}),Object(O.jsx)(G.a,{onEnter:function(){c.current&&(t?d.firestore().collection("expenses").where("account_name","==",t).orderBy("spend_date","desc").startAfter(c.current).limit(20).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id})}));c.current=e.docs[e.docs.length-1],l([].concat(Object(z.a)(s),Object(z.a)(t)))})):d.firestore().collection("expenses").orderBy("spend_date","desc").startAfter(c.current).limit(20).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id})}));c.current=e.docs[e.docs.length-1],l([].concat(Object(z.a)(s),Object(z.a)(t)))})))}})]})};var J=function(){var e=Object(b.h)(),t=new URLSearchParams(e.search).get("acc"),c=d.auth().currentUser,n=a.a.useState(""),i=Object(r.a)(n,2),s=(i[0],i[1],a.a.useState([])),l=Object(r.a)(s,2),o=l[0],j=l[1],u=a.a.useState(!1),h=Object(r.a)(u,2);return h[0],h[1],a.a.useEffect((function(){c&&d.firestore().collection("accounts").where("user_id","==",c.uid).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id})}));j(t)}))}),[]),Object(O.jsx)(y.a,{children:Object(O.jsx)(B.a,{columns:3,divided:!0,children:Object(O.jsxs)(B.a.Row,{children:[Object(O.jsx)(B.a.Column,{width:4,children:Object(O.jsx)(I.a,{selection:!0,size:"large",children:o.map((function(e,c){return Object(O.jsxs)(I.a.Item,{active:t==e.name,as:p.b,to:"/acc-expenses?acc=".concat(e.id),children:[t==e.id?Object(O.jsx)(U.a,{name:"right triangle"}):"",Object(O.jsx)(I.a.Content,{children:e.name})]},c)}))})}),Object(O.jsx)(B.a.Column,{width:12,children:Object(O.jsx)(M,{})})]})})})};function K(){var e=Object(b.g)(),t=A(),c=t.currentUser;t.logout;function n(){return(n=Object(f.a)(Object(x.a)().mark((function t(){return Object(x.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.signOut();case 3:e.push("/login-form"),t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}return Object(O.jsxs)("div",{children:[c&&c.email,Object(O.jsx)(o.a,{variant:"link",onClick:function(){return n.apply(this,arguments)},children:"Log Out"})]})}var T=function(){var e=d.firestore(),t=Object(n.useRef)(),c=Object(n.useRef)(),a=Object(n.useRef)(),i=Object(n.useState)(""),s=Object(r.a)(i,2),l=s[0],o=s[1],j=Object(n.useState)(""),h=Object(r.a)(j,2),x=h[0],f=h[1],p=Object(n.useState)(""),w=Object(r.a)(p,2),H=w[0],I=w[1],F=Object(n.useState)({}),R=Object(r.a)(F,2),A=(R[0],R[1]),E=Object(n.useState)([]),_=Object(r.a)(E,2),D=_[0],P=_[1],N=Object(n.useState)(""),L=Object(r.a)(N,2),z=L[0],G=L[1],M=Object(n.useState)((new Date).toLocaleDateString()),J=Object(r.a)(M,2),K=J[0],T=J[1],V=Object(n.useState)([]),W=Object(r.a)(V,2),Y=W[0],$=W[1],Q=Object(n.useState)(0),Z=Object(r.a)(Q,2),X=Z[0],ee=Z[1],te=Object(n.useState)(!1),ce=Object(r.a)(te,2),ne=(ce[0],ce[1],Object(n.useState)(0)),ae=Object(r.a)(ne,2),re=ae[0],ie=ae[1],se=Object(n.useState)(!1),le=Object(r.a)(se,2),oe=le[0],je=le[1],ue=u.currentUser||null,de=Object(b.h)(),be=Object(b.g)(),Oe=new URLSearchParams(de.search).get("account_id")||null;function he(){je(!1),G(""),o("")}return Object(n.useEffect)((function(){ue&&e.collection("accounts").where("user_id","==",ue.uid).limit(3).get().then((function(e){var t=e.docs.map((function(e){return Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id})}));if(P(t),Oe){var c=t.filter((function(e){return e.id.includes(Oe)}));ie(c[0].balance)}})),e.collection("balances").where("user_id","==",ue.uid).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id})})),c=0;t.forEach((function(e){c+=1*e.expense})),ee(c)})),e.collection("balances").where("account_id","==",Oe).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id})}));$(t)}))}),[Oe]),Object(O.jsxs)(y.a,{children:[Object(O.jsxs)(B.a,{columns:"equal",children:[Object(O.jsx)(B.a.Row,{children:D.map((function(e,t){return Object(O.jsx)(B.a.Column,{children:Object(O.jsx)(q.a,{color:"teal",onClick:function(){be.push("/balances?account_id=".concat(e.id)),ie(e.balance)},inverted:Oe==e.id,textAlign:"center",children:e.name})},t)}))}),Object(O.jsxs)(B.a.Row,{children:[Object(O.jsx)(B.a.Column,{children:Object(O.jsxs)(q.a,{color:"pink",textAlign:"right",children:[Object(O.jsx)(g.a,{sub:!0,children:"\u672c\u6708\u652f\u51fa"}),Object(O.jsxs)("span",{children:["$",X]})]})}),Object(O.jsx)(B.a.Column,{children:Object(O.jsxs)(q.a,{color:"teal",textAlign:"right",children:[Object(O.jsx)(g.a,{sub:!0,children:"\u5e33\u6236\u9918\u984d"}),Object(O.jsxs)("span",{children:["$",re]})]})})]}),Object(O.jsx)(B.a.Row,{children:Object(O.jsx)(B.a.Column,{children:Oe&&Object(O.jsx)(q.a,{color:"blue",onClick:function(){je(!0)},inverted:!0,textAlign:"center",children:"\u65b0\u589e"})})})]}),Object(O.jsxs)(v.a,{closeIcon:!0,open:oe,onClose:function(){return je(!1)},onOpen:function(){return je(!0)},children:[Object(O.jsx)(g.a,{icon:"archive",content:"Archive Old Messages"}),Object(O.jsx)(v.a.Content,{children:Object(O.jsxs)(C.a,{size:"large",children:[Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u65e5\u671f"}),Object(O.jsx)("input",{ref:t,value:K,onChange:function(e){return T(e.target.value)}})]}),Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u9805\u76ee"}),Object(O.jsx)("input",{ref:c,value:x,onChange:function(e){return f(e.target.value)}})]}),Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u91d1\u984d"}),Object(O.jsx)("input",{ref:a,value:l,onChange:function(e){return o(e.target.value)},type:"number"})]})]})}),Object(O.jsxs)(v.a.Actions,{children:[Object(O.jsxs)(S.a,{color:"red",floated:"left",onClick:function(){e.collection("balances").doc(z).delete().then((function(){he();var t=1*re+1*H;e.collection("accounts").doc(Oe).update({balance:t}).then((function(){ie(t)}))}))},children:[Object(O.jsx)(U.a,{name:"remove"})," No"]}),Object(O.jsx)(S.a,{color:"green",onClick:function(){if(z){var n={date:t.current.value,title:c.current.value,expense:a.current.value};e.collection("balances").doc(z).update(n).then((function(t){he();var c=1*re+1*H-1*l;e.collection("accounts").doc(Oe).update({balance:c}).then((function(){ie(c)}))}))}else{var r={date:t.current.value,title:c.current.value,expense:a.current.value,account_id:Oe,user_id:ue.uid,createdAt:d.firestore.Timestamp.now()};e.collection("balances").add(r).then((function(t){he();var c=1*re-1*l;e.collection("accounts").doc(Oe).update({balance:c}).then((function(){ie(c)}))}))}},children:Object(O.jsx)(U.a,{name:"checkmark"})})]})]}),Object(O.jsxs)(k.a,{unstackable:!0,children:[Object(O.jsx)(k.a.Header,{children:Object(O.jsxs)(k.a.Row,{children:[Object(O.jsx)(k.a.HeaderCell,{children:"\u65e5\u671f"}),Object(O.jsx)(k.a.HeaderCell,{children:"\u9805\u76ee"}),Object(O.jsx)(k.a.HeaderCell,{children:"\u652f\u51fa"})]})}),Object(O.jsx)(k.a.Body,{children:Y.map((function(e){return Object(O.jsxs)(k.a.Row,{onClick:function(){je(!0),A(e),f(e.title),o(e.expense),G(e.id),I(e.expense)},children:[Object(O.jsx)(k.a.Cell,{children:e.date}),Object(O.jsx)(k.a.Cell,{children:e.title}),Object(O.jsx)(k.a.Cell,{children:e.expense})]},e.id)}))})]})]})};var V=function(){var e=a.a.useState(null),t=Object(r.a)(e,2),c=t[0],i=t[1],s=a.a.useState(""),l=Object(r.a)(s,2),o=l[0],j=l[1];function u(){return(u=Object(f.a)(Object(x.a)().mark((function e(){return Object(x.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.auth().signOut();case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}a.a.useEffect((function(){d.auth().onAuthStateChanged((function(e){i(e),e&&j(e.email)}))}),[]),Object(b.g)();var m=Object(n.useState)(""),v=Object(r.a)(m,2),g=v[0],C=v[1];return Object(O.jsxs)(p.a,{children:[Object(O.jsxs)(P.a,{children:[c&&"mkdodos@gmail.com"==o?Object(O.jsx)(P.a.Item,{as:p.b,to:"/incomes",active:"editor"==g,onClick:function(){return C("editor")},children:"\u5916\u9001\u6536\u5165"}):"",c&&"mkdodos@gmail.com"==o?Object(O.jsx)(P.a.Item,{as:p.b,to:"/stocks",active:"review"==g,onClick:function(){return C("review")},children:"\u80a1\u7968"}):"",Object(O.jsx)(P.a.Item,{as:p.b,to:"/accounts",active:"accounts"==g,onClick:function(){return C("accounts")},children:"\u5e33\u6236"}),Object(O.jsx)(P.a.Item,{as:p.b,to:"/balances",children:"\u6536\u652f"}),Object(O.jsx)(P.a.Menu,{position:"right",children:c?Object(O.jsx)(N.a,{item:!0,text:c.displayName,children:Object(O.jsxs)(N.a.Menu,{children:[Object(O.jsx)(N.a.Item,{text:"\u57fa\u672c\u8cc7\u6599",as:p.b,to:"my-settings"}),Object(O.jsx)(N.a.Item,{text:"\u767b\u51fa",as:p.b,to:"login-form",onClick:function(){return u.apply(this,arguments)}})]})}):Object(O.jsx)(P.a.Item,{as:p.b,to:"/login-form",active:"login-form"==g,onClick:function(){return C("login-form")},children:"\u767b\u5165\u8868\u55ae"})})]}),Object(O.jsx)(E,{children:Object(O.jsxs)(b.d,{children:[Object(O.jsx)(b.b,{path:"/incomes",children:Object(O.jsx)(w,{})}),Object(O.jsx)(b.b,{path:"/stocks",children:c?Object(O.jsx)(F,{}):Object(O.jsx)(b.a,{to:"login-form"})}),Object(O.jsx)(b.b,{path:"/accounts",children:Object(O.jsx)(_,{})}),Object(O.jsx)(b.b,{path:"/acc-expenses",children:Object(O.jsx)(J,{})}),Object(O.jsx)(b.b,{path:"/login-form",children:Object(O.jsx)(L,{})}),Object(O.jsx)(b.b,{path:"/my-settings",children:Object(O.jsx)(D,{user:c})}),Object(O.jsx)(b.b,{path:"/signup",component:h}),Object(O.jsx)(b.b,{path:"/balances",component:T}),Object(O.jsx)(b.b,{path:"/",exact:!0,component:K})]})})]})};var W=function(){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(V,{})})},Y=c(36),$=c.n(Y),Q=(c(194),c(197),document.getElementById("root"));$.a.render(Object(O.jsx)(W,{}),Q)}},[[196,1,2]]]);
//# sourceMappingURL=main.a79ca321.chunk.js.map