(this["webpackJsonpreact-firebase8"]=this["webpackJsonpreact-firebase8"]||[]).push([[0],{177:function(e,t,c){"use strict";c.r(t);var n=c(13),a=c(0),r=c.n(a),i=c(15),o=c(39),s=c(26),l=c(195),j=c(199),d=c(194),u=c(179),b=c(191),h=c(196),O=c(133);O.a.initializeApp({apiKey:"AIzaSyClLeHQJMt3BzbrK_AHpWeq0nlqzY2r5ik",authDomain:"money-39797.firebaseapp.com",projectId:"money-39797",storageBucket:"money-39797.appspot.com",messagingSenderId:"142963352306",appId:"1:142963352306:web:ac3c09e593009a5175666b",measurementId:"G-012VKYDZ07"});var x=O.a,f=c(3);var m=function(){var e=r.a.useState([]),t=Object(n.a)(e,2),c=t[0],a=t[1],i=r.a.useState(!1),o=Object(n.a)(i,2),O=o[0],m=o[1],p=r.a.useState(!1),g=Object(n.a)(p,2),v=g[0],C=g[1],S=r.a.useState((new Date).toLocaleDateString()),y=Object(n.a)(S,2),k=y[0],w=y[1],I=r.a.useState(""),H=Object(n.a)(I,2),E=H[0],F=H[1],D=r.a.useState(0),B=Object(n.a)(D,2),P=B[0],A=B[1],R=r.a.useState(""),q=Object(n.a)(R,2),N=q[0],_=q[1],U=r.a.useState(""),z=Object(n.a)(U,2),L=z[0],M=z[1];return r.a.useEffect((function(){x.firestore().collection("incomes").orderBy("date","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(s.a)(Object(s.a)({},e.data()),{},{id:e.id})})),c=0;t.forEach((function(e){c+=1*e.amt})),A(c),a(t)}))}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(l.a,{open:O,closeIcon:!0,onClose:function(){return m(!1)},children:[Object(f.jsx)(l.a.Header,{children:"Select a Photo"}),Object(f.jsxs)(l.a.Content,{image:!0,children:[Object(f.jsx)(l.a.Description,{children:Object(f.jsx)(j.a,{children:"\u7de8\u8f2f"})}),Object(f.jsxs)(d.a,{children:[Object(f.jsxs)(d.a.Field,{children:[Object(f.jsx)("label",{children:"\u65e5\u671f"}),Object(f.jsx)("input",{value:k,placeholder:"",onChange:function(e){return w(e.target.value)}})]}),Object(f.jsxs)(d.a.Field,{children:[Object(f.jsx)("label",{children:"\u91d1\u984d"}),Object(f.jsx)("input",{type:"number",value:E,placeholder:"",onChange:function(e){return F(e.target.value)}})]}),Object(f.jsxs)(d.a.Field,{children:[Object(f.jsx)("label",{children:"\u5099\u8a3b"}),Object(f.jsx)("input",{value:N,placeholder:"",onChange:function(e){return _(e.target.value)}})]})]})]}),Object(f.jsxs)(l.a.Actions,{children:[L?Object(f.jsx)(u.a,{color:"red",floated:"left",loading:v,onClick:function(){C(!0),x.firestore().collection("incomes").doc(L).delete().then((function(){console.log("Document successfully deleted!"),m(!1),C(!1),M(""),F(""),_("")})).catch((function(e){console.error("Error removing document: ",e)}))},children:"\u522a\u9664"}):"",Object(f.jsx)(u.a,{color:"blue",loading:v,onClick:function(){C(!0);var e=x.firestore();L?e.collection("incomes").doc(L).update({date:k,amt:E,note:N}).then((function(){m(!1),C(!1),M(""),F(""),_(""),console.log("Document successfully updated!")})).catch((function(e){console.error("Error updating document: ",e)})):e.collection("incomes").add({date:k,amt:E,note:N}).then((function(){m(!1),C(!1),console.log("Document successfully created!")}))},children:"\u5132\u5b58"})]})]}),Object(f.jsxs)(b.a,{children:[Object(f.jsx)(u.a,{color:"blue",onClick:function(){m(!0),M(""),F(""),_(""),w((new Date).toLocaleDateString())},children:"\u65b0\u589e"}),Object(f.jsx)(j.a,{children:P}),Object(f.jsxs)(h.a,{unstackable:!0,children:[Object(f.jsx)(h.a.Header,{children:Object(f.jsxs)(h.a.Row,{children:[Object(f.jsx)(h.a.HeaderCell,{children:"\u65e5\u671f"}),Object(f.jsx)(h.a.HeaderCell,{children:"\u6536\u5165"}),Object(f.jsx)(h.a.HeaderCell,{children:"\u5099\u8a3b"})]})}),Object(f.jsx)(h.a.Body,{children:c.map((function(e){return Object(f.jsxs)(h.a.Row,{onClick:function(){w(e.date),_(e.note),F(e.amt),M(e.id),m(!0)},children:[Object(f.jsx)(h.a.Cell,{children:e.date}),Object(f.jsx)(h.a.Cell,{children:e.amt}),Object(f.jsx)(h.a.Cell,{children:e.note})]},e.id)}))})]})]})]})},p=c(190),g=c(197);var v=function(){var e="stocks",t=r.a.useState([]),c=Object(n.a)(t,2),a=c[0],i=c[1],o=r.a.useState(!1),O=Object(n.a)(o,2),m=O[0],v=O[1],C=r.a.useState(!1),S=Object(n.a)(C,2),y=S[0],k=S[1],w=r.a.useState(""),I=Object(n.a)(w,2),H=I[0],E=I[1],F=r.a.useState(""),D=Object(n.a)(F,2),B=D[0],P=D[1],A=r.a.useState(""),R=Object(n.a)(A,2),q=R[0],N=R[1],_=r.a.useState(0),U=Object(n.a)(_,2),z=U[0],L=U[1],M=r.a.useState([]),J=Object(n.a)(M,2),K=J[0],V=J[1],G=r.a.useState((new Date).toISOString().slice(0,10)),W=Object(n.a)(G,2),Y=W[0],Q=W[1],Z=r.a.useState(""),T=Object(n.a)(Z,2),X=T[0],$=T[1],ee=r.a.useState(0),te=Object(n.a)(ee,2),ce=te[0],ne=te[1],ae=r.a.useState(0),re=Object(n.a)(ae,2),ie=re[0],oe=re[1];function se(e){return e.sort((function(e,t){return e.date<t.date?1:-1}))}function le(e){return new Intl.NumberFormat("en-US",{currency:"USD"}).format(Math.round(e))}function je(){v(!1),k(!1),E(""),P(""),N(""),L("")}return r.a.useEffect((function(){x.firestore().collection(e).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(s.a)(Object(s.a)({},e.data()),{},{id:e.id})}));i(t);var c=0;t.forEach((function(e){c+=e.qty*e.price})),ne(c),c=0,t.forEach((function(e){var t;c+=e.qty*(null===(t=se(e.currPrices)[0])||void 0===t?void 0:t.price)})),oe(c)}))}),[]),Object(f.jsxs)(b.a,{children:[Object(f.jsxs)(l.a,{open:m,closeIcon:!0,onClose:function(){return v(!1)},children:[Object(f.jsx)(l.a.Header,{children:"Select a Photo"}),Object(f.jsxs)(l.a.Content,{image:!0,children:[Object(f.jsx)(l.a.Description,{children:Object(f.jsx)(j.a,{children:"\u7de8\u8f2f"})}),Object(f.jsxs)(d.a,{children:[Object(f.jsxs)(d.a.Field,{children:[Object(f.jsx)("label",{children:"\u540d\u7a31"}),Object(f.jsx)("input",{value:B,placeholder:"",onChange:function(e){return P(e.target.value)}})]}),Object(f.jsxs)(d.a.Field,{children:[Object(f.jsx)("label",{children:"\u6578\u91cf"}),Object(f.jsx)("input",{type:"number",value:q,placeholder:"",onChange:function(e){return N(e.target.value)}})]}),Object(f.jsxs)(d.a.Field,{children:[Object(f.jsx)("label",{children:"\u55ae\u50f9"}),Object(f.jsx)("input",{type:"number",value:z,placeholder:"",onChange:function(e){return L(e.target.value)}})]}),Object(f.jsx)(d.a.Field,{children:Object(f.jsx)(u.a,{color:"grey",onClick:function(){var t=x.firestore().collection(e).doc(H),c={date:Y,price:X};t.update({currPrices:x.firestore.FieldValue.arrayUnion(c)}),v(!1)},children:"\u65b0\u589e\u660e\u7d30"})}),Object(f.jsx)(d.a.Field,{children:Object(f.jsx)(p.a,{placeholder:"date",label:"\u65e5\u671f",type:"date",value:Y,onChange:function(e){return Q(e.target.value)}})}),Object(f.jsx)(d.a.Field,{children:Object(f.jsx)(p.a,{type:"number",placeholder:"price",label:"\u50f9\u683c",onChange:function(e){return $(e.target.value)}})})]}),Object(f.jsx)(g.a,{children:K?K.map((function(t){return Object(f.jsxs)(g.a.Item,{children:[Object(f.jsx)(g.a.Icon,{onClick:function(){return function(t,c){var n=x.firestore().collection(e).doc(t),a=K.findIndex((function(e){return e.date===c.date}));K.splice(a,1),n.update({currPrices:x.firestore.FieldValue.arrayRemove(c)})}(H,{date:t.date,price:t.price})},name:"close"}),Object(f.jsxs)(g.a.Content,{children:[t.date,"-",t.price]})]},t.date)})):""})]}),Object(f.jsxs)(l.a.Actions,{children:[H?Object(f.jsx)(u.a,{color:"red",floated:"left",loading:y,onClick:function(){k(!0),x.firestore().collection(e).doc(H).delete().then((function(){console.log("Document successfully deleted!"),je()})).catch((function(e){console.error("Error removing document: ",e)}))},children:"\u522a\u9664"}):"",Object(f.jsx)(u.a,{color:"blue",loading:y,onClick:function(){k(!0);var t=x.firestore();H?t.collection(e).doc(H).update({stockName:B,qty:q,price:z}).then((function(){je(),console.log("Document successfully updated!")})).catch((function(e){console.error("Error updating document: ",e)})):t.collection(e).add({stockName:B,qty:q,price:z}).then((function(){je(),console.log("Document successfully created!")}))},children:"\u5132\u5b58"})]})]}),Object(f.jsx)(u.a,{color:"blue",onClick:function(){v(!0),E(""),N(""),L("")},children:"\u65b0\u589e"}),Object(f.jsxs)(j.a,{floated:"right",children:[le(ie)," - ",le(ce)," = ",le(ie-ce)," "]}),Object(f.jsxs)(h.a,{unstackable:!0,children:[Object(f.jsx)(h.a.Header,{children:Object(f.jsxs)(h.a.Row,{children:[Object(f.jsx)(h.a.HeaderCell,{children:"\u540d\u7a31"}),Object(f.jsx)(h.a.HeaderCell,{children:"\u80a1\u6578"}),Object(f.jsx)(h.a.HeaderCell,{children:"\u73fe\u50f9"}),Object(f.jsx)(h.a.HeaderCell,{children:"\u6210\u672c"}),Object(f.jsx)(h.a.HeaderCell,{textAlign:"right",children:"\u5c0f\u8a08"})]})}),Object(f.jsx)(h.a.Body,{children:a.map((function(e){var t,c;return Object(f.jsxs)(h.a.Row,{onClick:function(){P(e.stockName),N(e.qty),L(e.price),E(e.id),V(e.currPrices),v(!0)},children:[Object(f.jsx)(h.a.Cell,{children:e.stockName}),Object(f.jsx)(h.a.Cell,{children:e.qty}),Object(f.jsx)(h.a.Cell,{children:Object(f.jsx)(g.a,{children:e.currPrices?Object(f.jsx)(g.a.Item,{children:null===(t=se(e.currPrices)[0])||void 0===t?void 0:t.price}):""})}),Object(f.jsx)(h.a.Cell,{children:e.price}),Object(f.jsx)(h.a.Cell,{textAlign:"right",children:le(e.qty*((null===(c=se(e.currPrices)[0])||void 0===c?void 0:c.price)-e.price))})]},e.id)}))})]})]})},C=c(200),S=c(46),y=c(150),k=c(96),w=c(146);var I=function(){var e=Object(i.g)(),t=new URLSearchParams(e.search).get("acc"),c=r.a.useRef(),a=r.a.useState([]),o=Object(n.a)(a,2),l=o[0],j=o[1];return r.a.useEffect((function(){t?x.firestore().collection("expenses").where("account_name","==",t).orderBy("spend_date","desc").limit(20).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(s.a)(Object(s.a)({},e.data()),{},{id:e.id})}));j(t)})):x.firestore().collection("expenses").limit(20).orderBy("spend_date","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(s.a)(Object(s.a)({},e.data()),{},{id:e.id})}));c.current=e.docs[e.docs.length-1],j(t)}))}),[t]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(h.a,{unstackable:!0,children:[Object(f.jsx)(h.a.Header,{children:Object(f.jsxs)(h.a.Row,{children:[Object(f.jsx)(h.a.HeaderCell,{width:3,children:"\u65e5\u671f"}),Object(f.jsx)(h.a.HeaderCell,{width:5,children:"\u9805\u76ee"}),Object(f.jsx)(h.a.HeaderCell,{children:"\u91d1\u984d"})]})}),Object(f.jsx)(h.a.Body,{children:l.map((function(e,t){return Object(f.jsxs)(h.a.Row,{children:[Object(f.jsx)(h.a.Cell,{children:e.spend_date}),Object(f.jsx)(h.a.Cell,{children:e.note}),Object(f.jsx)(h.a.Cell,{children:e.expense})]},t)}))})]}),Object(f.jsx)(w.a,{onEnter:function(){c.current&&(t?x.firestore().collection("expenses").where("account_name","==",t).orderBy("spend_date","desc").startAfter(c.current).limit(20).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(s.a)(Object(s.a)({},e.data()),{},{id:e.id})}));c.current=e.docs[e.docs.length-1],j([].concat(Object(k.a)(l),Object(k.a)(t)))})):x.firestore().collection("expenses").orderBy("spend_date","desc").startAfter(c.current).limit(20).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(s.a)(Object(s.a)({},e.data()),{},{id:e.id})}));c.current=e.docs[e.docs.length-1],j([].concat(Object(k.a)(l),Object(k.a)(t)))})))}})]})};var H=function(){var e=Object(i.g)(),t=new URLSearchParams(e.search).get("acc"),c=r.a.useState(""),a=Object(n.a)(c,2),s=(a[0],a[1]),l=r.a.useState([]),j=Object(n.a)(l,2),d=j[0],u=j[1];return r.a.useEffect((function(){x.firestore().collection("accounts").onSnapshot((function(e){var t=e.docs.map((function(e){return e.data()}));u(t)}))}),[]),Object(f.jsx)(b.a,{children:Object(f.jsx)(C.a,{columns:3,divided:!0,children:Object(f.jsxs)(C.a.Row,{children:[Object(f.jsx)(C.a.Column,{width:3,children:Object(f.jsx)(g.a,{selection:!0,size:"large",children:d.map((function(e,c){return Object(f.jsxs)(g.a.Item,{active:t==e.name,as:o.b,to:"/accounts?acc=".concat(e.name),children:[t==e.name?Object(f.jsx)(S.a,{name:"right triangle"}):"",Object(f.jsx)(g.a.Content,{onClick:function(t){return s(e.name)},children:e.name})]},c)}))})}),Object(f.jsx)(C.a.Column,{width:10,children:Object(f.jsx)(I,{})}),Object(f.jsx)(C.a.Column,{width:3,children:Object(f.jsx)(y.a,{src:"https://react.semantic-ui.com/images/wireframe/media-paragraph.png"})})]})})})};var E=function(){var e=x.auth().currentUser||{},t=r.a.useState(""),c=Object(n.a)(t,2),a=c[0],i=c[1];return r.a.useEffect((function(){})),Object(f.jsxs)(b.a,{children:[Object(f.jsx)(j.a,{children:e.displayName}),Object(f.jsx)(d.a,{onSubmit:function(){e.updateProfile({displayName:a}).then((function(){i("")}))},children:Object(f.jsxs)(d.a.Group,{children:[Object(f.jsx)(d.a.Input,{placeholder:"Name",name:"name",value:a,onChange:function(e){i(e.target.value)}}),Object(f.jsx)(d.a.Button,{color:"teal",content:"\u66f4\u65b0"})]})})]})},F=c(193),D=c(192);c(173);var B=function(){var e=Object(i.f)(),t=r.a.useState("mkdodos@gmail.com"),c=Object(n.a)(t,2),a=c[0],o=c[1],s=r.a.useState("123456"),l=Object(n.a)(s,2),j=l[0],u=l[1];return Object(f.jsx)(b.a,{children:Object(f.jsxs)(d.a,{onSubmit:function(){x.auth().signInWithEmailAndPassword(a,j).then((function(t){console.log(t),e.push("/accounts")}))},children:[Object(f.jsxs)(d.a.Field,{children:[Object(f.jsx)("label",{children:"\u5e33\u865f"}),Object(f.jsx)(p.a,{value:a,onChange:function(e){return o(e.target.value)},placeholder:"\u8acb\u8f38\u5165\u5e33\u865f"})]}),Object(f.jsxs)(d.a.Field,{children:[Object(f.jsx)("label",{children:"\u5bc6\u78bc"}),Object(f.jsx)("input",{value:j,onChange:function(e){return u(e.target.value)},placeholder:"\u8acb\u8f38\u5165\u5bc6\u78bc"})]}),Object(f.jsx)(d.a.Button,{children:"\u78ba\u5b9a"})]})})};var P=function(){var e=r.a.useState(null),t=Object(n.a)(e,2),c=t[0],s=t[1];r.a.useEffect((function(){x.auth().onAuthStateChanged((function(e){s(e)}))})),Object(i.f)();var l=Object(a.useState)(""),j=Object(n.a)(l,2),d=j[0],u=j[1];return Object(f.jsxs)(o.a,{children:[Object(f.jsxs)(F.a,{children:[Object(f.jsx)(F.a.Item,{as:o.b,to:"/incomes",active:"editor"==d,onClick:function(){return u("editor")},children:"\u5916\u9001\u6536\u5165"}),Object(f.jsx)(F.a.Item,{as:o.b,to:"/stocks",active:"review"==d,onClick:function(){return u("review")},children:"\u80a1\u7968"}),Object(f.jsx)(F.a.Item,{as:o.b,to:"/accounts",active:"accounts"==d,onClick:function(){return u("accounts")},children:"\u5e33\u6236"}),Object(f.jsx)(F.a.Menu,{position:"right",children:c?Object(f.jsx)(D.a,{item:!0,text:c.displayName,children:Object(f.jsxs)(D.a.Menu,{children:[Object(f.jsx)(D.a.Item,{text:"\u57fa\u672c\u8cc7\u6599",as:o.b,to:"my-settings"}),Object(f.jsx)(D.a.Item,{text:"\u767b\u51fa",onClick:function(){x.auth().signOut().then((function(){}))}})]})}):Object(f.jsx)(F.a.Item,{as:o.b,to:"/login-form",active:"login-form"==d,onClick:function(){return u("login-form")},children:"\u767b\u5165\u8868\u55ae"})})]}),Object(f.jsxs)(i.c,{children:[Object(f.jsx)(i.a,{path:"/incomes",children:Object(f.jsx)(m,{})}),Object(f.jsx)(i.a,{path:"/stocks",children:Object(f.jsx)(v,{})}),Object(f.jsx)(i.a,{path:"/accounts",children:Object(f.jsx)(H,{})}),Object(f.jsx)(i.a,{path:"/login-form",children:Object(f.jsx)(B,{})}),Object(f.jsx)(i.a,{path:"/my-settings",children:Object(f.jsx)(E,{})})]})]})};var A=function(){var e=r.a.useState(""),t=Object(n.a)(e,2);return t[0],t[1],r.a.useEffect((function(){})),Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(P,{})})},R=c(64),q=c.n(R),N=(c(175),c(178),document.getElementById("root"));q.a.render(Object(f.jsx)(A,{}),N)}},[[177,1,2]]]);
//# sourceMappingURL=main.b2c9d7d8.chunk.js.map