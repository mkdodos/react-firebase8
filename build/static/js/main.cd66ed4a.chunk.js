(this["webpackJsonpreact-firebase8"]=this["webpackJsonpreact-firebase8"]||[]).push([[0],{168:function(e,t,c){"use strict";c.r(t);var n=c(12),a=c(0),r=c.n(a),l=c(124),o=c(14),i=c(87),s=c(185),j=c(189),d=c(183),u=c(170),b=c(182),h=c(186),O=c(129);O.a.initializeApp({apiKey:"AIzaSyClLeHQJMt3BzbrK_AHpWeq0nlqzY2r5ik",authDomain:"money-39797.firebaseapp.com",projectId:"money-39797",storageBucket:"money-39797.appspot.com",messagingSenderId:"142963352306",appId:"1:142963352306:web:ac3c09e593009a5175666b",measurementId:"G-012VKYDZ07"});var x=O.a,f=c(5);var p=function(){var e=r.a.useState([]),t=Object(n.a)(e,2),c=t[0],a=t[1],l=r.a.useState(!1),o=Object(n.a)(l,2),O=o[0],p=o[1],m=r.a.useState(!1),g=Object(n.a)(m,2),C=g[0],v=g[1],S=r.a.useState((new Date).toLocaleDateString()),y=Object(n.a)(S,2),k=y[0],D=y[1],I=r.a.useState(""),F=Object(n.a)(I,2),H=F[0],w=F[1],E=r.a.useState(0),q=Object(n.a)(E,2),P=q[0],A=q[1],B=r.a.useState(""),N=Object(n.a)(B,2),R=N[0],z=N[1],J=r.a.useState(""),K=Object(n.a)(J,2),L=K[0],U=K[1];return r.a.useEffect((function(){x.firestore().collection("incomes").orderBy("date","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(i.a)(Object(i.a)({},e.data()),{},{id:e.id})})),c=0;t.forEach((function(e){c+=1*e.amt})),A(c),a(t)}))}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(s.a,{open:O,closeIcon:!0,onClose:function(){return p(!1)},children:[Object(f.jsx)(s.a.Header,{children:"Select a Photo"}),Object(f.jsxs)(s.a.Content,{image:!0,children:[Object(f.jsx)(s.a.Description,{children:Object(f.jsx)(j.a,{children:"\u7de8\u8f2f"})}),Object(f.jsxs)(d.a,{children:[Object(f.jsxs)(d.a.Field,{children:[Object(f.jsx)("label",{children:"\u65e5\u671f"}),Object(f.jsx)("input",{value:k,placeholder:"",onChange:function(e){return D(e.target.value)}})]}),Object(f.jsxs)(d.a.Field,{children:[Object(f.jsx)("label",{children:"\u91d1\u984d"}),Object(f.jsx)("input",{type:"number",value:H,placeholder:"",onChange:function(e){return w(e.target.value)}})]}),Object(f.jsxs)(d.a.Field,{children:[Object(f.jsx)("label",{children:"\u5099\u8a3b"}),Object(f.jsx)("input",{value:R,placeholder:"",onChange:function(e){return z(e.target.value)}})]})]})]}),Object(f.jsxs)(s.a.Actions,{children:[L?Object(f.jsx)(u.a,{color:"red",floated:"left",loading:C,onClick:function(){v(!0),x.firestore().collection("incomes").doc(L).delete().then((function(){console.log("Document successfully deleted!"),p(!1),v(!1),U(""),w(""),z("")})).catch((function(e){console.error("Error removing document: ",e)}))},children:"\u522a\u9664"}):"",Object(f.jsx)(u.a,{color:"blue",loading:C,onClick:function(){v(!0);var e=x.firestore();L?e.collection("incomes").doc(L).update({date:k,amt:H,note:R}).then((function(){p(!1),v(!1),U(""),w(""),z(""),console.log("Document successfully updated!")})).catch((function(e){console.error("Error updating document: ",e)})):e.collection("incomes").add({date:k,amt:H,note:R}).then((function(){p(!1),v(!1),console.log("Document successfully created!")}))},children:"\u5132\u5b58"})]})]}),Object(f.jsxs)(b.a,{children:[Object(f.jsx)(u.a,{color:"blue",onClick:function(){p(!0),U(""),w(""),z(""),D((new Date).toLocaleDateString())},children:"\u65b0\u589e"}),Object(f.jsx)(j.a,{children:P}),Object(f.jsxs)(h.a,{unstackable:!0,children:[Object(f.jsx)(h.a.Header,{children:Object(f.jsxs)(h.a.Row,{children:[Object(f.jsx)(h.a.HeaderCell,{children:"\u65e5\u671f"}),Object(f.jsx)(h.a.HeaderCell,{children:"\u6536\u5165"}),Object(f.jsx)(h.a.HeaderCell,{children:"\u5099\u8a3b"})]})}),Object(f.jsx)(h.a.Body,{children:c.map((function(e){return Object(f.jsxs)(h.a.Row,{onClick:function(){D(e.date),z(e.note),w(e.amt),U(e.id),p(!0)},children:[Object(f.jsx)(h.a.Cell,{children:e.date}),Object(f.jsx)(h.a.Cell,{children:e.amt}),Object(f.jsx)(h.a.Cell,{children:e.note})]},e.id)}))})]})]})]})},m=c(181),g=c(187);var C=function(){var e="stocks",t=r.a.useState([]),c=Object(n.a)(t,2),a=c[0],l=c[1],o=r.a.useState(!1),O=Object(n.a)(o,2),p=O[0],C=O[1],v=r.a.useState(!1),S=Object(n.a)(v,2),y=S[0],k=S[1],D=r.a.useState(""),I=Object(n.a)(D,2),F=I[0],H=I[1],w=r.a.useState(""),E=Object(n.a)(w,2),q=E[0],P=E[1],A=r.a.useState(""),B=Object(n.a)(A,2),N=B[0],R=B[1],z=r.a.useState(0),J=Object(n.a)(z,2),K=J[0],L=J[1],U=r.a.useState([]),V=Object(n.a)(U,2),Y=V[0],G=V[1],M=r.a.useState((new Date).toISOString().slice(0,10)),Q=Object(n.a)(M,2),W=Q[0],Z=Q[1],_=r.a.useState(""),T=Object(n.a)(_,2),X=T[0],$=T[1],ee=r.a.useState(0),te=Object(n.a)(ee,2),ce=te[0],ne=te[1];function ae(e){return new Intl.NumberFormat("en-US",{currency:"USD"}).format(e)}function re(){C(!1),k(!1),H(""),P(""),R(""),L("")}return r.a.useEffect((function(){x.firestore().collection(e).onSnapshot((function(e){var t=e.docs.map((function(e){return e.data().currPrices=[{date:"2022-07-18",price:"123"}],Object(i.a)(Object(i.a)({},e.data()),{},{id:e.id})}));l(t);var c=0;t.forEach((function(e){c+=e.qty*e.price})),ne(c)}))}),[]),Object(f.jsxs)(b.a,{children:[Object(f.jsxs)(s.a,{open:p,closeIcon:!0,onClose:function(){return C(!1)},children:[Object(f.jsx)(s.a.Header,{children:"Select a Photo"}),Object(f.jsxs)(s.a.Content,{image:!0,children:[Object(f.jsx)(s.a.Description,{children:Object(f.jsx)(j.a,{children:"\u7de8\u8f2f"})}),Object(f.jsxs)(d.a,{children:[Object(f.jsxs)(d.a.Field,{children:[Object(f.jsx)("label",{children:"\u540d\u7a31"}),Object(f.jsx)("input",{value:q,placeholder:"",onChange:function(e){return P(e.target.value)}})]}),Object(f.jsxs)(d.a.Field,{children:[Object(f.jsx)("label",{children:"\u6578\u91cf"}),Object(f.jsx)("input",{type:"number",value:N,placeholder:"",onChange:function(e){return R(e.target.value)}})]}),Object(f.jsxs)(d.a.Field,{children:[Object(f.jsx)("label",{children:"\u55ae\u50f9"}),Object(f.jsx)("input",{type:"number",value:K,placeholder:"",onChange:function(e){return L(e.target.value)}})]}),Object(f.jsx)(d.a.Field,{children:Object(f.jsx)(u.a,{color:"grey",onClick:function(){var t=x.firestore().collection(e).doc(F),c={date:W,price:X};t.update({currPrices:x.firestore.FieldValue.arrayUnion(c)}),C(!1)},children:"\u65b0\u589e\u660e\u7d30"})}),Object(f.jsx)(d.a.Field,{children:Object(f.jsx)(m.a,{placeholder:"date",label:"\u65e5\u671f",type:"date",value:W,onChange:function(e){return Z(e.target.value)}})}),Object(f.jsx)(d.a.Field,{children:Object(f.jsx)(m.a,{type:"number",placeholder:"price",label:"\u50f9\u683c",onChange:function(e){return $(e.target.value)}})})]}),Object(f.jsx)(g.a,{children:Y?Y.map((function(t){return Object(f.jsxs)(g.a.Item,{children:[Object(f.jsx)(g.a.Icon,{onClick:function(){return function(t,c){x.firestore().collection(e).doc(t).update({currPrices:x.firestore.FieldValue.arrayRemove(c)})}(F,{date:t.date,price:t.price})},name:"close"}),Object(f.jsxs)(g.a.Content,{children:[t.date,"-",t.price]})]},t.date)})):""})]}),Object(f.jsxs)(s.a.Actions,{children:[F?Object(f.jsx)(u.a,{color:"red",floated:"left",loading:y,onClick:function(){k(!0),x.firestore().collection(e).doc(F).delete().then((function(){console.log("Document successfully deleted!"),re()})).catch((function(e){console.error("Error removing document: ",e)}))},children:"\u522a\u9664"}):"",Object(f.jsx)(u.a,{color:"blue",loading:y,onClick:function(){k(!0);var t=x.firestore();F?t.collection(e).doc(F).update({stockName:q,qty:N,price:K}).then((function(){re(),console.log("Document successfully updated!")})).catch((function(e){console.error("Error updating document: ",e)})):t.collection(e).add({stockName:q,qty:N,price:K}).then((function(){re(),console.log("Document successfully created!")}))},children:"\u5132\u5b58"})]})]}),Object(f.jsx)(u.a,{color:"blue",onClick:function(){C(!0),H(""),R(""),L("")},children:"\u65b0\u589e"}),Object(f.jsx)(j.a,{floated:"right",children:ae(ce)}),Object(f.jsxs)(h.a,{unstackable:!0,children:[Object(f.jsx)(h.a.Header,{children:Object(f.jsxs)(h.a.Row,{children:[Object(f.jsx)(h.a.HeaderCell,{children:"\u540d\u7a31"}),Object(f.jsx)(h.a.HeaderCell,{children:"\u80a1\u6578"}),Object(f.jsx)(h.a.HeaderCell,{children:"\u50f9\u683c"}),Object(f.jsx)(h.a.HeaderCell,{textAlign:"right",children:"\u5c0f\u8a08"}),Object(f.jsx)(h.a.HeaderCell,{children:"\u73fe\u50f9"})]})}),Object(f.jsx)(h.a.Body,{children:a.map((function(e){var t,c;return Object(f.jsxs)(h.a.Row,{onClick:function(){P(e.stockName),R(e.qty),L(e.price),H(e.id),G(e.currPrices),C(!0)},children:[Object(f.jsx)(h.a.Cell,{children:e.stockName}),Object(f.jsx)(h.a.Cell,{children:e.qty}),Object(f.jsx)(h.a.Cell,{children:e.price}),Object(f.jsx)(h.a.Cell,{textAlign:"right",children:ae(e.qty*e.price)}),Object(f.jsx)(h.a.Cell,{children:Object(f.jsx)(g.a,{children:e.currPrices?Object(f.jsx)(g.a.Item,{children:null===(t=(c=e.currPrices,c.sort((function(e,t){return e.date<t.date?1:-1})))[0])||void 0===t?void 0:t.price}):""})})]},e.id)}))})]})]})},v=c(184);var S=function(){var e=Object(a.useState)(""),t=Object(n.a)(e,2),c=t[0],r=t[1];return Object(f.jsxs)(l.a,{children:[Object(f.jsxs)(v.a,{children:[Object(f.jsx)(v.a.Item,{as:l.b,to:"/incomes",active:"editor"==c,onClick:function(){return r("editor")},children:"\u5916\u9001\u6536\u5165"}),Object(f.jsx)(v.a.Item,{as:l.b,to:"/stocks",active:"review"==c,onClick:function(){return r("review")},children:"\u80a1\u7968"})]}),Object(f.jsxs)(o.c,{children:[Object(f.jsx)(o.a,{path:"/incomes",children:Object(f.jsx)(p,{})}),Object(f.jsx)(o.a,{path:"/stocks",children:Object(f.jsx)(C,{})})]})]})};var y=function(){var e=r.a.useState(""),t=Object(n.a)(e,2);return t[0],t[1],r.a.useEffect((function(){})),Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(S,{})})},k=c(62),D=c.n(k),I=(c(166),c(169),document.getElementById("root"));D.a.render(Object(f.jsx)(y,{}),I)}},[[168,1,2]]]);
//# sourceMappingURL=main.cd66ed4a.chunk.js.map