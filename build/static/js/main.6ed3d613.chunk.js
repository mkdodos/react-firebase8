(this["webpackJsonpreact-firebase8"]=this["webpackJsonpreact-firebase8"]||[]).push([[0],{196:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),r=c(9),i=c(221),s=c(213),o=c(215),l=c(210),j=c(143),d=(c(150),j.a.initializeApp({apiKey:"AIzaSyClLeHQJMt3BzbrK_AHpWeq0nlqzY2r5ik",authDomain:"money-39797.firebaseapp.com",projectId:"money-39797",storageBucket:"money-39797.appspot.com",messagingSenderId:"142963352306",appId:"1:142963352306:web:ac3c09e593009a5175666b",measurementId:"G-012VKYDZ07"}).auth()),u=j.a,b=c(19),O=c(1);function h(){var e=Object(n.useRef)(),t=Object(n.useRef)(),c=Object(n.useRef)(),a=Object(n.useState)(""),j=Object(r.a)(a,2),d=j[0],u=j[1],h=Object(b.g)();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(i.a,{children:Object(O.jsxs)(i.a.Body,{children:[Object(O.jsx)("h2",{className:"text-center mb-4",children:"Sign up"}),d&&Object(O.jsx)(s.a,{variant:"danger",children:d}),Object(O.jsxs)(o.a,{onSubmit:function(e){if(e.preventDefault(),t.current.value!==c.current.value)return u("Passwords do not match");h.push("/"),u("")},children:[Object(O.jsxs)(o.a.Group,{id:"email",className:"mb-3",children:[Object(O.jsx)(o.a.Label,{children:"Email"}),Object(O.jsx)(o.a.Control,{type:"email",ref:e,required:!0})]}),Object(O.jsxs)(o.a.Group,{id:"password",className:"mb-3",children:[Object(O.jsx)(o.a.Label,{children:"Password"}),Object(O.jsx)(o.a.Control,{type:"password",ref:t,required:!0})]}),Object(O.jsxs)(o.a.Group,{id:"password-confirm",className:"mb-3",children:[Object(O.jsx)(o.a.Label,{children:"Password Confirmation"}),Object(O.jsx)(o.a.Control,{type:"password",ref:c,required:!0})]}),Object(O.jsx)(l.a,{className:"w-10",type:"submit",children:"Sign Up"})]})]})}),Object(O.jsx)("div",{className:"w-100 text-center mt-2",children:"Already have an account? Log in"})]})}var x=c(93),f=c(108),p=c(27),m=c(6),v=c(218),g=c(223),C=c(217),S=c(198),y=c(212),k=c(219);var w=function(){var e=a.a.useState([]),t=Object(r.a)(e,2),c=t[0],n=t[1],i=a.a.useState(!1),s=Object(r.a)(i,2),o=s[0],l=s[1],j=a.a.useState(!1),d=Object(r.a)(j,2),b=d[0],h=d[1],x=a.a.useState((new Date).toLocaleDateString()),f=Object(r.a)(x,2),p=f[0],w=f[1],I=a.a.useState(""),H=Object(r.a)(I,2),R=H[0],A=H[1],F=a.a.useState(0),E=Object(r.a)(F,2),_=E[0],D=E[1],P=a.a.useState(""),N=Object(r.a)(P,2),B=N[0],q=N[1],U=a.a.useState(""),L=Object(r.a)(U,2),z=L[0],G=L[1];return a.a.useEffect((function(){u.firestore().collection("incomes").orderBy("date","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id})})),c=0;t.forEach((function(e){c+=1*e.amt})),D(c),n(t)}))}),[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(v.a,{open:o,closeIcon:!0,onClose:function(){return l(!1)},children:[Object(O.jsx)(v.a.Header,{children:"Select a Photo"}),Object(O.jsxs)(v.a.Content,{image:!0,children:[Object(O.jsx)(v.a.Description,{children:Object(O.jsx)(g.a,{children:"\u7de8\u8f2f"})}),Object(O.jsxs)(C.a,{children:[Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u65e5\u671f"}),Object(O.jsx)("input",{value:p,placeholder:"",onChange:function(e){return w(e.target.value)}})]}),Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u91d1\u984d"}),Object(O.jsx)("input",{type:"number",value:R,placeholder:"",onChange:function(e){return A(e.target.value)}})]}),Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u5099\u8a3b"}),Object(O.jsx)("input",{value:B,placeholder:"",onChange:function(e){return q(e.target.value)}})]})]})]}),Object(O.jsxs)(v.a.Actions,{children:[z?Object(O.jsx)(S.a,{color:"red",floated:"left",loading:b,onClick:function(){h(!0),u.firestore().collection("incomes").doc(z).delete().then((function(){console.log("Document successfully deleted!"),l(!1),h(!1),G(""),A(""),q("")})).catch((function(e){console.error("Error removing document: ",e)}))},children:"\u522a\u9664"}):"",Object(O.jsx)(S.a,{color:"blue",loading:b,onClick:function(){h(!0);var e=u.firestore();z?e.collection("incomes").doc(z).update({date:p,amt:R,note:B}).then((function(){l(!1),h(!1),G(""),A(""),q(""),console.log("Document successfully updated!")})).catch((function(e){console.error("Error updating document: ",e)})):e.collection("incomes").add({date:p,amt:R,note:B}).then((function(){l(!1),h(!1),console.log("Document successfully created!")}))},children:"\u5132\u5b58"})]})]}),Object(O.jsxs)(y.a,{children:[Object(O.jsx)(S.a,{color:"blue",onClick:function(){l(!0),G(""),A(""),q(""),w((new Date).toLocaleDateString())},children:"\u65b0\u589e"}),Object(O.jsx)(g.a,{children:_}),Object(O.jsxs)(k.a,{unstackable:!0,children:[Object(O.jsx)(k.a.Header,{children:Object(O.jsxs)(k.a.Row,{children:[Object(O.jsx)(k.a.HeaderCell,{children:"\u65e5\u671f"}),Object(O.jsx)(k.a.HeaderCell,{children:"\u6536\u5165"}),Object(O.jsx)(k.a.HeaderCell,{children:"\u5099\u8a3b"})]})}),Object(O.jsx)(k.a.Body,{children:c.map((function(e){return Object(O.jsxs)(k.a.Row,{onClick:function(){w(e.date),q(e.note),A(e.amt),G(e.id),l(!0)},children:[Object(O.jsx)(k.a.Cell,{children:e.date}),Object(O.jsx)(k.a.Cell,{children:e.amt}),Object(O.jsx)(k.a.Cell,{children:e.note})]},e.id)}))})]})]})]})},I=c(211),H=c(220);var R=function(){var e="stocks",t=a.a.useState([]),c=Object(r.a)(t,2),n=c[0],i=c[1],s=a.a.useState(!1),o=Object(r.a)(s,2),l=o[0],j=o[1],d=a.a.useState(!1),b=Object(r.a)(d,2),h=b[0],x=b[1],f=a.a.useState(""),p=Object(r.a)(f,2),w=p[0],R=p[1],A=a.a.useState(""),F=Object(r.a)(A,2),E=F[0],_=F[1],D=a.a.useState(""),P=Object(r.a)(D,2),N=P[0],B=P[1],q=a.a.useState(0),U=Object(r.a)(q,2),L=U[0],z=U[1],G=a.a.useState([]),M=Object(r.a)(G,2),J=M[0],K=M[1],T=a.a.useState((new Date).toISOString().slice(0,10)),V=Object(r.a)(T,2),W=V[0],Y=V[1],Q=a.a.useState(""),Z=Object(r.a)(Q,2),X=Z[0],$=Z[1],ee=a.a.useState(0),te=Object(r.a)(ee,2),ce=te[0],ne=te[1],ae=a.a.useState(0),re=Object(r.a)(ae,2),ie=re[0],se=re[1];function oe(e){return e.sort((function(e,t){return e.date<t.date?1:-1}))}function le(e){return new Intl.NumberFormat("en-US",{currency:"USD"}).format(Math.round(e))}function je(){j(!1),x(!1),R(""),_(""),B(""),z("")}return a.a.useEffect((function(){u.firestore().collection(e).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id})}));i(t);var c=0;t.forEach((function(e){c+=e.qty*e.price})),ne(c),c=0,t.forEach((function(e){var t;c+=e.qty*(null===(t=oe(e.currPrices)[0])||void 0===t?void 0:t.price)})),se(c)}))}),[]),Object(O.jsxs)(y.a,{children:[Object(O.jsxs)(v.a,{open:l,closeIcon:!0,onClose:function(){return j(!1)},children:[Object(O.jsx)(v.a.Header,{children:"Select a Photo"}),Object(O.jsxs)(v.a.Content,{image:!0,children:[Object(O.jsx)(v.a.Description,{children:Object(O.jsx)(g.a,{children:"\u7de8\u8f2f"})}),Object(O.jsxs)(C.a,{children:[Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u540d\u7a31"}),Object(O.jsx)("input",{value:E,placeholder:"",onChange:function(e){return _(e.target.value)}})]}),Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u6578\u91cf"}),Object(O.jsx)("input",{type:"number",value:N,placeholder:"",onChange:function(e){return B(e.target.value)}})]}),Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u55ae\u50f9"}),Object(O.jsx)("input",{type:"number",value:L,placeholder:"",onChange:function(e){return z(e.target.value)}})]}),Object(O.jsx)(C.a.Field,{children:Object(O.jsx)(S.a,{color:"grey",onClick:function(){var t=u.firestore().collection(e).doc(w),c={date:W,price:X};t.update({currPrices:u.firestore.FieldValue.arrayUnion(c)}),j(!1)},children:"\u65b0\u589e\u660e\u7d30"})}),Object(O.jsx)(C.a.Field,{children:Object(O.jsx)(I.a,{placeholder:"date",label:"\u65e5\u671f",type:"date",value:W,onChange:function(e){return Y(e.target.value)}})}),Object(O.jsx)(C.a.Field,{children:Object(O.jsx)(I.a,{type:"number",placeholder:"price",label:"\u50f9\u683c",onChange:function(e){return $(e.target.value)}})})]}),Object(O.jsx)(H.a,{children:J?J.map((function(t){return Object(O.jsxs)(H.a.Item,{children:[Object(O.jsx)(H.a.Icon,{onClick:function(){return function(t,c){var n=u.firestore().collection(e).doc(t),a=J.findIndex((function(e){return e.date===c.date}));J.splice(a,1),n.update({currPrices:u.firestore.FieldValue.arrayRemove(c)})}(w,{date:t.date,price:t.price})},name:"close"}),Object(O.jsxs)(H.a.Content,{children:[t.date,"-",t.price]})]},t.date)})):""})]}),Object(O.jsxs)(v.a.Actions,{children:[w?Object(O.jsx)(S.a,{color:"red",floated:"left",loading:h,onClick:function(){x(!0),u.firestore().collection(e).doc(w).delete().then((function(){console.log("Document successfully deleted!"),je()})).catch((function(e){console.error("Error removing document: ",e)}))},children:"\u522a\u9664"}):"",Object(O.jsx)(S.a,{color:"blue",loading:h,onClick:function(){x(!0);var t=u.firestore();w?t.collection(e).doc(w).update({stockName:E,qty:N,price:L}).then((function(){je(),console.log("Document successfully updated!")})).catch((function(e){console.error("Error updating document: ",e)})):t.collection(e).add({stockName:E,qty:N,price:L}).then((function(){je(),console.log("Document successfully created!")}))},children:"\u5132\u5b58"})]})]}),Object(O.jsx)(S.a,{color:"blue",onClick:function(){j(!0),R(""),B(""),z("")},children:"\u65b0\u589e"}),Object(O.jsxs)(g.a,{floated:"right",children:[le(ie)," - ",le(ce)," = ",le(ie-ce)," "]}),Object(O.jsxs)(k.a,{unstackable:!0,children:[Object(O.jsx)(k.a.Header,{children:Object(O.jsxs)(k.a.Row,{children:[Object(O.jsx)(k.a.HeaderCell,{children:"\u540d\u7a31"}),Object(O.jsx)(k.a.HeaderCell,{children:"\u80a1\u6578"}),Object(O.jsx)(k.a.HeaderCell,{children:"\u73fe\u50f9"}),Object(O.jsx)(k.a.HeaderCell,{children:"\u6210\u672c"}),Object(O.jsx)(k.a.HeaderCell,{textAlign:"right",children:"\u5c0f\u8a08"})]})}),Object(O.jsx)(k.a.Body,{children:n.map((function(e){var t,c;return Object(O.jsxs)(k.a.Row,{onClick:function(){_(e.stockName),B(e.qty),z(e.price),R(e.id),K(e.currPrices),j(!0)},children:[Object(O.jsx)(k.a.Cell,{children:e.stockName}),Object(O.jsx)(k.a.Cell,{children:e.qty}),Object(O.jsx)(k.a.Cell,{children:Object(O.jsx)(H.a,{children:e.currPrices?Object(O.jsx)(H.a.Item,{children:null===(t=oe(e.currPrices)[0])||void 0===t?void 0:t.price}):""})}),Object(O.jsx)(k.a.Cell,{children:e.price}),Object(O.jsx)(k.a.Cell,{textAlign:"right",children:le(e.qty*((null===(c=oe(e.currPrices)[0])||void 0===c?void 0:c.price)-e.price))})]},e.id)}))})]})]})},A=a.a.createContext();function F(){return Object(n.useContext)(A)}function E(e){var t=e.children,c=Object(n.useState)(),a=Object(r.a)(c,2),i=a[0],s=a[1],o=Object(n.useState)(!0),l=Object(r.a)(o,2),j=l[0],u=l[1];Object(n.useEffect)((function(){return d.onAuthStateChanged((function(e){s(e),u(!1)}))}),[]);var b={currentUser:i,logout:function(){return d.signOut()}};return Object(O.jsx)(A.Provider,{value:b,children:!j&&t})}var _=function(){var e=a.a.useState([]),t=Object(r.a)(e,2),c=t[0],n=t[1],i=a.a.useState(""),s=Object(r.a)(i,2),o=s[0],l=s[1],j=a.a.useState(!1),d=Object(r.a)(j,2),b=d[0],h=d[1],x=a.a.useState(""),f=Object(r.a)(x,2),p=f[0],g=f[1],w=F().currentUser;return a.a.useEffect((function(){w&&u.firestore().collection("accounts").where("user_id","==",w.uid).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id})}));n(t)}))}),[]),Object(O.jsxs)(y.a,{children:[Object(O.jsxs)(k.a,{unstackable:!0,children:[Object(O.jsx)(k.a.Header,{children:Object(O.jsx)(k.a.Row,{children:Object(O.jsx)(k.a.HeaderCell,{children:"\u540d\u7a31"})})}),Object(O.jsx)(k.a.Body,{children:c.map((function(e,t){return Object(O.jsx)(k.a.Row,{onClick:function(){l(e.name),g(e.id),h(!0)},children:Object(O.jsx)(k.a.Cell,{children:e.name})},t)}))})]}),Object(O.jsxs)(v.a,{closeIcon:!0,onClose:function(){return h(!1)},onOpen:function(){h(!0),l("")},open:b,trigger:Object(O.jsx)(S.a,{children:"\u65b0\u589e"}),children:[Object(O.jsx)(v.a.Header,{children:"\u65b0\u589e\u5e33\u6236"}),Object(O.jsx)(v.a.Content,{children:Object(O.jsx)(C.a,{children:Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u540d\u7a31"}),Object(O.jsx)("input",{value:o,onChange:function(e){l(e.target.value)},placeholder:"\u8acb\u8f38\u5165\u5e33\u6236\u540d\u7a31"})]})})}),Object(O.jsxs)(v.a.Actions,{children:[p?Object(O.jsx)(S.a,{color:"red",floated:"left",onClick:function(){u.firestore().collection("accounts").doc(p).delete().then((function(){console.log("Document successfully deleted!"),h(!1),g(""),l("")})).catch((function(e){console.error("Error removing document: ",e)}))},children:"\u522a\u9664"}):"",Object(O.jsx)(S.a,{color:"blue",onClick:function(){p?function(){var e=u.firestore().collection("accounts").doc(p),t={name:o};e.update(t).then((function(){h(!1),l(""),g("")}))}():function(){h(!1),l("");var e={name:o,user_id:w.uid,createdAt:u.firestore.Timestamp.now()};u.firestore().collection("accounts").add(e).then((function(){console.log("create")}))}()},children:"\u5132\u5b58"})]})]})]})};var D=function(e){var t=e.user,c=a.a.useState(""),n=Object(r.a)(c,2),i=n[0],s=n[1];return a.a.useEffect((function(){})),Object(O.jsxs)(y.a,{children:[Object(O.jsx)(g.a,{children:t.displayName}),Object(O.jsx)(C.a,{onSubmit:function(){t.updateProfile({displayName:i}).then((function(){s("")}))},children:Object(O.jsxs)(C.a.Group,{children:[Object(O.jsx)(C.a.Input,{placeholder:"Name",name:"name",value:i,onChange:function(e){s(e.target.value)}}),Object(O.jsx)(C.a.Button,{color:"teal",content:"\u66f4\u65b0"})]})})]})},P=c(216),N=c(214),B=c(224),q=c(225);var U=function(){var e=Object(b.g)(),t=a.a.useState("mkdodos@gmail.com"),c=Object(r.a)(t,2),n=c[0],i=c[1],s=a.a.useState("123456"),o=Object(r.a)(s,2),l=o[0],j=o[1];return Object(O.jsx)(y.a,{children:Object(O.jsx)("div",{children:Object(O.jsxs)(B.a,{children:[Object(O.jsx)(B.a.Column,{mobile:16,tablet:3,computer:5}),Object(O.jsx)(B.a.Column,{mobile:16,tablet:10,computer:6,children:Object(O.jsx)(q.a,{children:Object(O.jsxs)(C.a,{onSubmit:function(){u.auth().signInWithEmailAndPassword(n,l).then((function(t){e.push("/acc-expenses")}))},children:[Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u5e33\u865f"}),Object(O.jsx)(I.a,{value:n,onChange:function(e){return i(e.target.value)},placeholder:"\u8acb\u8f38\u5165\u5e33\u865f"})]}),Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u5bc6\u78bc"}),Object(O.jsx)("input",{value:l,onChange:function(e){return j(e.target.value)},placeholder:"\u8acb\u8f38\u5165\u5bc6\u78bc"})]}),Object(O.jsx)(C.a.Button,{primary:!0,children:"\u78ba\u5b9a"})]})})}),Object(O.jsx)(B.a.Column,{mobile:16,tablet:3,computer:5})]})})})},L=c(52),z=c(103),G=c(167);var M=function(){var e=Object(b.h)(),t=new URLSearchParams(e.search).get("acc"),c=a.a.useRef(),n=a.a.useState([]),i=Object(r.a)(n,2),s=i[0],o=i[1],l=a.a.useState(""),j=Object(r.a)(l,2),d=j[0],h=j[1],x=a.a.useState(""),f=Object(r.a)(x,2),p=f[0],g=f[1],y=a.a.useState(!1),w=Object(r.a)(y,2),I=w[0],H=w[1],R=a.a.useState(""),A=Object(r.a)(R,2),F=A[0],E=A[1],_=a.a.useState(!1),D=Object(r.a)(_,2),P=D[0],N=D[1];function B(){h(""),g(""),H(!1),E("")}return a.a.useEffect((function(){t?u.firestore().collection("expenses").where("account_name","==",t).orderBy("spend_date","desc").limit(20).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id})}));c.current=e.docs[e.docs.length-1],o(t)})):o([])}),[t]),Object(O.jsxs)(O.Fragment,{children:[t&&Object(O.jsx)(S.a,{onClick:function(){H(!0)},children:"\u65b0\u589e"}),Object(O.jsxs)(v.a,{open:I,closeIcon:!0,onClose:B,children:[Object(O.jsx)(v.a.Header,{children:"\u7de8\u8f2f\u652f\u51fa"}),Object(O.jsx)(v.a.Content,{children:Object(O.jsxs)(C.a,{children:[Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u9805\u76ee"}),Object(O.jsx)("input",{placeholder:"\u9805\u76ee",value:p,onChange:function(e){g(e.target.value)}})]}),Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u91d1\u984d"}),Object(O.jsx)("input",{type:"number",placeholder:"\u91d1\u984d",value:F,onChange:function(e){E(e.target.value)}})]})]})}),Object(O.jsxs)(v.a.Actions,{children:[d?Object(O.jsx)(S.a,{color:"red",floated:"left",loading:P,onClick:function(){var e=u.firestore().collection("expenses").doc(d);N(!0),e.delete().then((function(){B(),N(!1)}))},children:"\u522a\u9664"}):"",Object(O.jsx)(S.a,{onClick:function(){d?function(){var e=u.firestore().collection("expenses").doc(d),c={account_name:t,note:p,expense:F,spend_date:"2022-07-22"};N(!0),e.update(c).then((function(){B(),N(!1)}))}():function(){var e={account_name:t,note:p,expense:F,spend_date:"2022-07-22",createdAt:u.firestore.Timestamp.now()};N(!0),u.firestore().collection("expenses").add(e).then((function(){B(),N(!1)}))}()},loading:P,children:"\u5132\u5b58"})]})]}),Object(O.jsxs)(k.a,{unstackable:!0,children:[Object(O.jsx)(k.a.Header,{children:Object(O.jsxs)(k.a.Row,{children:[Object(O.jsx)(k.a.HeaderCell,{width:3,children:"\u65e5\u671f"}),Object(O.jsx)(k.a.HeaderCell,{width:5,children:"\u9805\u76ee"}),Object(O.jsx)(k.a.HeaderCell,{children:"\u91d1\u984d"})]})}),Object(O.jsx)(k.a.Body,{children:s.map((function(e,t){return Object(O.jsxs)(k.a.Row,{onClick:function(){h(e.id),g(e.note),E(e.expense),H(!0)},children:[Object(O.jsx)(k.a.Cell,{children:e.spend_date}),Object(O.jsx)(k.a.Cell,{children:e.note}),Object(O.jsx)(k.a.Cell,{children:e.expense})]},t)}))})]}),Object(O.jsx)(G.a,{onEnter:function(){c.current&&(t?u.firestore().collection("expenses").where("account_name","==",t).orderBy("spend_date","desc").startAfter(c.current).limit(20).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id})}));c.current=e.docs[e.docs.length-1],o([].concat(Object(z.a)(s),Object(z.a)(t)))})):u.firestore().collection("expenses").orderBy("spend_date","desc").startAfter(c.current).limit(20).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id})}));c.current=e.docs[e.docs.length-1],o([].concat(Object(z.a)(s),Object(z.a)(t)))})))}})]})};var J=function(){var e=Object(b.h)(),t=new URLSearchParams(e.search).get("acc"),c=u.auth().currentUser,n=a.a.useState(""),i=Object(r.a)(n,2),s=(i[0],i[1],a.a.useState([])),o=Object(r.a)(s,2),l=o[0],j=o[1],d=a.a.useState(!1),h=Object(r.a)(d,2);return h[0],h[1],a.a.useEffect((function(){c&&u.firestore().collection("accounts").where("user_id","==",c.uid).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id})}));j(t)}))}),[]),Object(O.jsx)(y.a,{children:Object(O.jsx)(B.a,{columns:3,divided:!0,children:Object(O.jsxs)(B.a.Row,{children:[Object(O.jsx)(B.a.Column,{width:4,children:Object(O.jsx)(H.a,{selection:!0,size:"large",children:l.map((function(e,c){return Object(O.jsxs)(H.a.Item,{active:t==e.name,as:p.b,to:"/acc-expenses?acc=".concat(e.id),children:[t==e.id?Object(O.jsx)(L.a,{name:"right triangle"}):"",Object(O.jsx)(H.a.Content,{children:e.name})]},c)}))})}),Object(O.jsx)(B.a.Column,{width:12,children:Object(O.jsx)(M,{})})]})})})};function K(){var e=Object(b.g)(),t=F(),c=t.currentUser;t.logout;function n(){return(n=Object(f.a)(Object(x.a)().mark((function t(){return Object(x.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.signOut();case 3:e.push("/login-form"),t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}return Object(O.jsxs)("div",{children:[c&&c.email,Object(O.jsx)(l.a,{variant:"link",onClick:function(){return n.apply(this,arguments)},children:"Log Out"})]})}var T=function(){var e=u.firestore(),t=Object(n.useRef)(),c=Object(n.useRef)(),a=Object(n.useRef)(),i=Object(n.useState)(""),s=Object(r.a)(i,2),o=s[0],l=s[1],j=Object(n.useState)({}),h=Object(r.a)(j,2),x=h[0],f=h[1],p=Object(n.useState)([]),w=Object(r.a)(p,2),I=w[0],H=w[1],R=Object(n.useState)(""),A=Object(r.a)(R,2),F=A[0],E=A[1],_=Object(n.useState)([]),D=Object(r.a)(_,2),P=D[0],N=D[1],U=Object(n.useState)({}),z=Object(r.a)(U,2),G=z[0],M=(z[1],Object(n.useState)(!1)),J=Object(r.a)(M,2),K=J[0],T=J[1],V=d.currentUser||null,W=Object(b.h)(),Y=Object(b.g)(),Q=new URLSearchParams(W.search).get("account_id")||null;return Object(n.useEffect)((function(){V&&e.collection("accounts").where("user_id","==",V.uid).limit(3).get().then((function(e){var t=e.docs.map((function(e){return Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id})}));H(t),console.log(t)})),e.collection("balances").where("account_id","==",Q).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id})}));N(t)}))}),[Q]),Object(O.jsxs)(y.a,{children:[Object(O.jsxs)(B.a,{columns:"equal",children:[Object(O.jsx)(B.a.Row,{children:I.map((function(e,t){return Object(O.jsx)(B.a.Column,{children:Object(O.jsx)(q.a,{color:"teal",onClick:function(){Y.push("/balances?account_id=".concat(e.id))},inverted:Q==e.id,textAlign:"center",children:e.name})},t)}))}),Object(O.jsxs)(B.a.Row,{children:[Object(O.jsx)(B.a.Column,{children:Object(O.jsx)(q.a,{textAlign:"right",children:Object(O.jsx)(g.a,{children:G.income})})}),Object(O.jsx)(B.a.Column,{children:Object(O.jsx)(q.a,{textAlign:"right",children:Object(O.jsx)(g.a,{children:G.expense})})})]}),Object(O.jsx)(B.a.Row,{children:Object(O.jsx)(B.a.Column,{children:Object(O.jsx)(q.a,{color:"blue",onClick:function(){T(!0)},inverted:!0,textAlign:"center",children:"\u65b0\u589e"})})})]}),Object(O.jsxs)(v.a,{closeIcon:!0,open:K,onClose:function(){return T(!1)},onOpen:function(){return T(!0)},children:[Object(O.jsx)(g.a,{icon:"archive",content:"Archive Old Messages"}),Object(O.jsx)(v.a.Content,{children:Object(O.jsxs)(C.a,{size:"large",children:[Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u65e5\u671f"}),Object(O.jsx)("input",{ref:t,value:x.date,onChange:function(e){return f({date:e.target.value})},type:"date"})]}),Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u9805\u76ee"}),Object(O.jsx)("input",{ref:c})]}),Object(O.jsxs)(C.a.Field,{children:[Object(O.jsx)("label",{children:"\u91d1\u984d"}),Object(O.jsx)("input",{ref:a,value:o,onChange:function(e){return l(e.target.value)},type:"number"})]})]})}),Object(O.jsxs)(v.a.Actions,{children:[Object(O.jsxs)(S.a,{color:"red",onClick:function(){return T(!1)},children:[Object(O.jsx)(L.a,{name:"remove"})," No"]}),Object(O.jsx)(S.a,{color:"green",onClick:function(){if(F){var n={date:t.current.value,title:c.current.value,income:a.current.value};e.collection("balances").doc(F).update(n).then((function(e){T(!1),E("")}))}else{var r={date:t.current.value,title:c.current.value,income:a.current.value,account_id:Q,createdAt:u.firestore.Timestamp.now()};e.collection("balances").add(r).then((function(e){console.log(P),T(!1)}))}},children:Object(O.jsx)(L.a,{name:"checkmark"})})]})]}),Object(O.jsxs)(k.a,{unstackable:!0,children:[Object(O.jsx)(k.a.Header,{children:Object(O.jsxs)(k.a.Row,{children:[Object(O.jsx)(k.a.HeaderCell,{children:"\u65e5\u671f"}),Object(O.jsx)(k.a.HeaderCell,{children:"\u6536\u5165"}),Object(O.jsx)(k.a.HeaderCell,{children:"\u652f\u51fa"})]})}),Object(O.jsx)(k.a.Body,{children:P.map((function(e){return Object(O.jsxs)(k.a.Row,{onClick:function(){T(!0),f(e),l(e.income),E(e.id)},children:[Object(O.jsx)(k.a.Cell,{children:e.date}),Object(O.jsx)(k.a.Cell,{children:e.income}),Object(O.jsx)(k.a.Cell,{children:e.expense})]},e.id)}))})]})]})};var V=function(){var e=a.a.useState(null),t=Object(r.a)(e,2),c=t[0],i=t[1],s=a.a.useState(""),o=Object(r.a)(s,2),l=o[0],j=o[1];function d(){return(d=Object(f.a)(Object(x.a)().mark((function e(){return Object(x.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.auth().signOut();case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}a.a.useEffect((function(){u.auth().onAuthStateChanged((function(e){i(e),e&&j(e.email)}))}),[]),Object(b.g)();var m=Object(n.useState)(""),v=Object(r.a)(m,2),g=v[0],C=v[1];return Object(O.jsxs)(p.a,{children:[Object(O.jsxs)(P.a,{children:[c&&"mkdodos@gmail.com"==l?Object(O.jsx)(P.a.Item,{as:p.b,to:"/incomes",active:"editor"==g,onClick:function(){return C("editor")},children:"\u5916\u9001\u6536\u5165"}):"",c&&"mkdodos@gmail.com"==l?Object(O.jsx)(P.a.Item,{as:p.b,to:"/stocks",active:"review"==g,onClick:function(){return C("review")},children:"\u80a1\u7968"}):"",Object(O.jsx)(P.a.Item,{as:p.b,to:"/accounts",active:"accounts"==g,onClick:function(){return C("accounts")},children:"\u5e33\u6236"}),Object(O.jsx)(P.a.Item,{as:p.b,to:"/balances",children:"\u6536\u652f"}),Object(O.jsx)(P.a.Menu,{position:"right",children:c?Object(O.jsx)(N.a,{item:!0,text:c.displayName,children:Object(O.jsxs)(N.a.Menu,{children:[Object(O.jsx)(N.a.Item,{text:"\u57fa\u672c\u8cc7\u6599",as:p.b,to:"my-settings"}),Object(O.jsx)(N.a.Item,{text:"\u767b\u51fa",as:p.b,to:"login-form",onClick:function(){return d.apply(this,arguments)}})]})}):Object(O.jsx)(P.a.Item,{as:p.b,to:"/login-form",active:"login-form"==g,onClick:function(){return C("login-form")},children:"\u767b\u5165\u8868\u55ae"})})]}),Object(O.jsx)(E,{children:Object(O.jsxs)(b.d,{children:[Object(O.jsx)(b.b,{path:"/incomes",children:Object(O.jsx)(w,{})}),Object(O.jsx)(b.b,{path:"/stocks",children:c?Object(O.jsx)(R,{}):Object(O.jsx)(b.a,{to:"login-form"})}),Object(O.jsx)(b.b,{path:"/accounts",children:Object(O.jsx)(_,{})}),Object(O.jsx)(b.b,{path:"/acc-expenses",children:Object(O.jsx)(J,{})}),Object(O.jsx)(b.b,{path:"/login-form",children:Object(O.jsx)(U,{})}),Object(O.jsx)(b.b,{path:"/my-settings",children:Object(O.jsx)(D,{user:c})}),Object(O.jsx)(b.b,{path:"/signup",component:h}),Object(O.jsx)(b.b,{path:"/balances",component:T}),Object(O.jsx)(b.b,{path:"/",exact:!0,component:K})]})})]})};var W=function(){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(V,{})})},Y=c(36),Q=c.n(Y),Z=(c(194),c(197),document.getElementById("root"));Q.a.render(Object(O.jsx)(W,{}),Z)}},[[196,1,2]]]);
//# sourceMappingURL=main.6ed3d613.chunk.js.map