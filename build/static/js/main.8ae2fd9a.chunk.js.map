{"version":3,"sources":["utils/firebase.js","components/Incomes.js","App.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","Incomes","React","useState","incomes","setIncomes","isModalOpen","setIsModalOpen","isLoading","setIsLoading","Date","toLocaleDateString","incomeDate","setIncomeDate","amt","setAmt","total","setTotal","note","setNote","docID","setDocID","useEffect","firestore","collection","onSnapshot","snapshot","data","docs","map","doc","id","temp","forEach","income","Modal","open","closeIcon","onClose","Header","Content","image","Description","Form","Field","value","placeholder","onChange","e","target","type","Actions","Button","color","floated","loading","onClick","delete","then","console","log","catch","error","db","update","date","add","Table","unstackable","Row","HeaderCell","Body","Cell","App","activeItem","setActiveItem","Menu","Item","name","active","Container","container","document","getElementById","ReactDom","render"],"mappings":"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","file":"static/js/main.8ae2fd9a.chunk.js","sourcesContent":["import firebase from 'firebase/app'\r\n// const firebaseConfig = {\r\n//   apiKey: \"AIzaSyCxMvi4M0Xai8kuqn3r970KLassk-fTlGw\",\r\n//   authDomain: \"social-cool-16812.firebaseapp.com\",\r\n//   projectId: \"social-cool-16812\",\r\n//   storageBucket: \"social-cool-16812.appspot.com\",\r\n//   messagingSenderId: \"443839253633\",\r\n//   appId: \"1:443839253633:web:105b938de5b05af1f15180\"\r\n// };\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyClLeHQJMt3BzbrK_AHpWeq0nlqzY2r5ik\",\r\n  authDomain: \"money-39797.firebaseapp.com\",\r\n  projectId: \"money-39797\",\r\n  storageBucket: \"money-39797.appspot.com\",\r\n  messagingSenderId: \"142963352306\",\r\n  appId: \"1:142963352306:web:ac3c09e593009a5175666b\",\r\n  measurementId: \"G-012VKYDZ07\"\r\n};\r\n\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\nexport default firebase\r\n// Initialize Cloud Firestore and get a reference to the service\r\n// const db = firebase.firestore();","import React from 'react';\r\nimport { Icon, Button, Header, Table, Form, Modal } from 'semantic-ui-react';\r\nimport firebase from '../utils/firebase';\r\nimport 'firebase/firestore';\r\n\r\nfunction Incomes() {\r\n  // const data = [\r\n  //   { date: 'dd', amt: 100, note: 'reain' },\r\n  //   { date: 'd45d', amt: 1500, note: 'rea45in' },\r\n  // ];\r\n\r\n  const [incomes, setIncomes] = React.useState([]);\r\n  // const [income, setIncome] = React.useState({});\r\n\r\n  const [isModalOpen, setIsModalOpen] = React.useState(false);\r\n  const [isLoading, setIsLoading] = React.useState(false);\r\n\r\n  const [incomeDate, setIncomeDate] = React.useState(\r\n    new Date().toLocaleDateString()\r\n  );\r\n  const [amt, setAmt] = React.useState('');\r\n\r\n  const [total, setTotal] = React.useState(0);\r\n\r\n  const [note, setNote] = React.useState('');\r\n  const [docID, setDocID] = React.useState('');\r\n\r\n  // onSnapshot 監聽資料有變動時執行,在新增後,資料即時更新\r\n  React.useEffect(() => {\r\n    firebase\r\n      .firestore()\r\n      .collection('incomes')\r\n      .onSnapshot((snapshot) => {\r\n        const data = snapshot.docs.map((doc) => {\r\n          \r\n          return { ...doc.data(), id: doc.id };\r\n        });\r\n        let temp = 0;\r\n        data.forEach((income)=>{\r\n          temp +=  income.amt*1\r\n        })\r\n        setTotal(temp)\r\n        // console.log(init)\r\n        setIncomes(data);        \r\n      })\r\n\r\n     \r\n    // .get()\r\n    // .then((snapshot) => {\r\n    //   const data = snapshot.docs.map((doc) => {\r\n    //     return {...doc.data(), id:doc.id}\r\n    //   });\r\n    //   setIncomes(data);\r\n    // });\r\n  }, []);\r\n\r\n  \r\n\r\n  function deleteIncome() {\r\n    setIsLoading(true);\r\n    const db = firebase.firestore();\r\n    db.collection('incomes')\r\n      .doc(docID)\r\n      .delete()\r\n      .then(() => {\r\n        console.log('Document successfully deleted!');\r\n        setIsModalOpen(false);\r\n        setIsLoading(false);\r\n        setDocID('');\r\n        setAmt('');\r\n        setNote('');\r\n      })\r\n      .catch((error) => {\r\n        console.error('Error removing document: ', error);\r\n      });\r\n  }\r\n\r\n  function updateIncome() {\r\n    setIsLoading(true);\r\n    const db = firebase.firestore();\r\n\r\n    // 用 docID 判斷新增或更新\r\n    if (docID) {\r\n      var washingtonRef = db.collection('incomes').doc(docID);\r\n      washingtonRef\r\n        .update({ date: incomeDate, amt: amt, note: note })\r\n        .then(() => {\r\n          setIsModalOpen(false);\r\n          setIsLoading(false);\r\n          setDocID('');\r\n          setAmt('');\r\n          setNote('');\r\n          console.log('Document successfully updated!');\r\n        })\r\n        .catch((error) => {\r\n          // The document probably doesn't exist.\r\n          console.error('Error updating document: ', error);\r\n        });\r\n    } else {\r\n      // 新增\r\n      db.collection('incomes')\r\n        .add({\r\n          date: incomeDate,\r\n          amt: amt,\r\n          note: note,\r\n        })\r\n        .then(() => {\r\n          setIsModalOpen(false);\r\n          setIsLoading(false);\r\n          console.log('Document successfully created!');\r\n        });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Modal open={isModalOpen} closeIcon onClose={() => setIsModalOpen(false)}>\r\n        <Modal.Header>Select a Photo</Modal.Header>\r\n        <Modal.Content image>\r\n          <Modal.Description>\r\n            <Header>編輯</Header>\r\n          </Modal.Description>\r\n          <Form>\r\n            <Form.Field>\r\n              <label>日期</label>\r\n              <input\r\n                value={incomeDate}\r\n                placeholder=\"\"\r\n                onChange={(e) => setIncomeDate(e.target.value)}\r\n              />\r\n            </Form.Field>\r\n            <Form.Field>\r\n              <label>金額</label>\r\n              <input type=\"number\"\r\n                value={amt}\r\n                placeholder=\"\"\r\n                onChange={(e) => setAmt(e.target.value)}\r\n              />\r\n            </Form.Field>\r\n            <Form.Field>\r\n              <label>備註</label>\r\n              <input\r\n                value={note}\r\n                placeholder=\"\"\r\n                onChange={(e) => setNote(e.target.value)}\r\n              />\r\n            </Form.Field>\r\n          </Form>\r\n        </Modal.Content>\r\n\r\n        <Modal.Actions>\r\n          {docID ? (\r\n            <Button\r\n              color=\"red\"\r\n              floated=\"left\"\r\n              loading={isLoading}\r\n              onClick={deleteIncome}\r\n            >\r\n              刪除\r\n            </Button>\r\n          ) : (\r\n            ''\r\n          )}\r\n\r\n          <Button color=\"blue\" loading={isLoading} onClick={updateIncome}>\r\n            儲存\r\n          </Button>\r\n        </Modal.Actions>\r\n      </Modal>\r\n\r\n      {/* 用 submit 送出造成用量超額 */}\r\n      {/* <Button type='submit' onClick={addIncome}>Submit</Button> */}\r\n      <Button\r\n        color=\"blue\"\r\n        onClick={() => {\r\n          setIsModalOpen(true);\r\n          setDocID('');\r\n          setAmt('');\r\n          setNote('');\r\n          setIncomeDate(new Date().toLocaleDateString())\r\n        }}\r\n      >\r\n        新增\r\n      </Button>\r\n      <Header>{total}</Header>\r\n      \r\n      <Table unstackable>\r\n        <Table.Header>\r\n          <Table.Row>\r\n            <Table.HeaderCell>日期</Table.HeaderCell>\r\n            <Table.HeaderCell>收入</Table.HeaderCell>\r\n            <Table.HeaderCell>備註</Table.HeaderCell>\r\n          </Table.Row>\r\n        </Table.Header>\r\n\r\n        <Table.Body>\r\n          {incomes.map((income) => {\r\n            return (\r\n              <Table.Row\r\n                onClick={() => {\r\n                  setIncomeDate(income.date);\r\n                  setNote(income.note);\r\n                  setAmt(income.amt);\r\n                  setDocID(income.id);\r\n\r\n                  setIsModalOpen(true);\r\n                }}\r\n                key={income.id}\r\n              >\r\n                <Table.Cell>{income.date}</Table.Cell>\r\n                <Table.Cell>{income.amt}</Table.Cell>\r\n                <Table.Cell>{income.note}</Table.Cell>\r\n              </Table.Row>\r\n            );\r\n          })}\r\n          {/* <Table.Row>\r\n          <Table.Cell>07-14</Table.Cell>\r\n          <Table.Cell>300</Table.Cell>\r\n          <Table.Cell>下雨</Table.Cell>\r\n        </Table.Row>\r\n        <Table.Row>\r\n          <Table.Cell>07-13</Table.Cell>\r\n          <Table.Cell>699</Table.Cell>\r\n          <Table.Cell></Table.Cell>\r\n        </Table.Row> */}\r\n        </Table.Body>\r\n      </Table>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Incomes;\r\n","import React from 'react';\r\nimport { Menu, List, Container } from 'semantic-ui-react';\r\n// import firebase from \"./utils/firebase\";\r\n// import \"firebase/auth\";\r\nimport Incomes from './components/Incomes';\r\nimport NewIncome from './components/NewIncome';\r\nfunction App() {\r\n  const [activeItem, setActiveItem] = React.useState('');\r\n  React.useEffect(() => {});\r\n\r\n  return (\r\n    <>\r\n   \r\n      <Menu>\r\n        <Menu.Item\r\n          name=\"editorials\"\r\n          active={activeItem == 'editor'}\r\n          onClick={() => setActiveItem('editor')}\r\n        >\r\n          外送收入\r\n        </Menu.Item>\r\n\r\n        <Menu.Item\r\n          name=\"reviews\"\r\n          active={activeItem == 'review'}\r\n          onClick={() => setActiveItem('review')}\r\n        >\r\n          Reviews\r\n        </Menu.Item>\r\n      </Menu>\r\n      <Container>\r\n      {/* <NewIncome/> */}\r\n      <Incomes/>\r\n     \r\n      {/* <List>\r\n        <List.Item>Apples</List.Item>\r\n        <List.Item>Pears</List.Item>\r\n        <List.Item>Oranges</List.Item>\r\n      </List> */}\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\nexport default App;\r\n","import App from './App';\r\nimport ReactDom from 'react-dom'\r\nimport 'semantic-ui-css/semantic.min.css'\r\n\r\nconst container = document.getElementById('root');\r\nReactDom.render(<App/>,container)"],"sourceRoot":""}